(()=>{"use strict";var t,e,i,s,n={8:(t,e,i)=>{i.d(e,{Z:()=>n});var s=i(50);class n{constructor(t,e,i=0){this.frames=t,this.interval=e,this.cycles=i,this.timer=new s.Z,this.currentFrame=0,this.timesPlayed=0,this.startTimer()}update(t){1!==this.frames.length&&this.timer.update(t)}startTimer(){this.timer.addTask((()=>{(0===this.cycles||this.timesPlayed<this.cycles)&&(this.currentFrame++,this.currentFrame%=this.frames.length,this.currentFrame===this.frames.length-1&&this.timesPlayed++)}),this.interval)}getCurrentFrame(){return this.frames[this.currentFrame]}refresh(){this.currentFrame=0,this.timesPlayed=0}isDone(){return this.timesPlayed===this.cycles}isHalfwayDone(){return this.currentFrame>=this.frames.length/2}}},663:(t,e,i)=>{i.d(e,{O:()=>n,y:()=>s});const s=(t,e,i,s,n,o,r,a)=>t+i>=n&&t<=n+r&&e+s>=o&&e<=o+a,n=(t,e,i,s,n,o,r,a)=>{const h=e+s-o,l=o+a-e,c=n+r-t,d=t+i-n;return l<h&&l<c&&l<d?0:h<l&&h<c&&h<d?1:c<d&&c<l&&c<h?2:d<c&&d<l&&d<h?3:void 0}},767:(t,e,i)=>{i.d(e,{b:()=>s});const s=(t,e,i,s,n,o=5,r=!1,a=!0)=>{t.save(),t.beginPath(),t.moveTo(e+o,i),t.lineTo(e+s-o,i),t.quadraticCurveTo(e+s,i,e+s,i+o),t.lineTo(e+s,i+n-o),t.quadraticCurveTo(e+s,i+n,e+s-o,i+n),t.lineTo(e+o,i+n),t.quadraticCurveTo(e,i+n,e,i+n-o),t.lineTo(e,i+o),t.quadraticCurveTo(e,i,e+o,i),t.closePath(),r&&t.fill(),a&&t.stroke(),t.restore()}},785:(t,e,i)=>{i.d(e,{Z:()=>s});class s{constructor(t,e,i,s){this.stateMachine=t,this.context=e,this.width=i,this.height=s,this.lastTime=0}start(){this.gameLoop()}gameLoop(t=0){const e=(t-this.lastTime)/1e3;this.update(e),this.lastTime=t,requestAnimationFrame((t=>this.gameLoop(t)))}update(t){this.stateMachine.update(t),this.render()}render(){this.context.clearRect(0,0,this.width,this.height),this.stateMachine.render()}}},436:(t,e,i)=>{i.d(e,{Z:()=>o});var s=i(663),n=i(38);class o{constructor(t=0,e=0,i=0,s=0,n="red"){this.colour=n,this.set(t,e,i,s)}set(t,e,i,s){this.position=new n.Z(t,e),this.dimensions=new n.Z(i,s)}didCollide(t){return(0,s.y)(this.position.x,this.position.y,this.dimensions.x,this.dimensions.y,t.position.x,t.position.y,t.dimensions.x,t.dimensions.y)}getCollisionDirection(t){return(0,s.O)(this.position.x,this.position.y,this.dimensions.x,this.dimensions.y,t.position.x,t.position.y,t.dimensions.x,t.dimensions.y)}render(t){t.save(),t.strokeStyle=this.colour,t.beginPath(),t.rect(this.position.x,this.position.y,this.dimensions.x,this.dimensions.y),t.stroke(),t.closePath(),t.restore()}}},360:(t,e,i)=>{i.d(e,{D9:()=>s,n8:()=>n});const s=(t,e)=>Math.floor(Math.random()*(e-t+1))+t,n=t=>s(1,100)<=100*t},378:(t,e,i)=>{i.d(e,{Z:()=>s});class s{constructor(t,e=0,i=0,s,n){this.graphic=t,this.x=e,this.y=i,this.width=s,this.height=n}render(t,e,i={x:1,y:1}){this.graphic.context.drawImage(this.graphic.image,this.x,this.y,this.width,this.height,t,e,this.width*i.x,this.height*i.y)}static generateSpritesFromSpriteSheet(t,e,i){const n=[],o=t.width/e,r=t.height/i;for(let a=0;a<r;a++)for(let r=0;r<o;r++)n.push(new s(t,r*e,a*i,e,i));return n}}},313:(t,e,i)=>{i.d(e,{Z:()=>s});class s{enter(t){}exit(){}update(t){}render(){}}},379:(t,e,i)=>{i.d(e,{Z:()=>s});class s{constructor(){this.states={}}add(t,e){e.name=t,this.states[t]=e,this.currentState=e}change(t,e){this.currentState.exit(),this.currentState=this.states[t],this.currentState.enter(e)}update(t){this.currentState.update(t)}render(t){this.currentState.render(t)}}},50:(t,e,i)=>{i.d(e,{Z:()=>s});class s{constructor(){this.tasks=[]}update(t){this.updateTasks(t),this.removeFinishedTasks()}addTask(t,e,i=0,s=(()=>{})){const o=new n(t,e,i,s);return this.tasks.push(o),o}updateTasks(t){this.tasks.forEach((e=>{e.update(t)}))}removeFinishedTasks(){this.tasks=this.tasks.filter((t=>!t.isDone))}clear(){this.tasks=[]}tween(t,e,i,s,n=(()=>{})){const o=Object.assign({},t);this.addTask((n=>{e.forEach(((e,r)=>{const a=i[r]-t[e]>0?1:-1,h=o[e],l=i[r],c=h+n/s*(l-h);t[e]=1===a?Math.min(l,c):Math.max(l,c)}))}),0,s,n)}async tweenAsync(t,e,i,s){return new Promise((n=>{this.tween(t,e,i,s,n)}))}wait(t,e=(()=>{})){return this.addTask((()=>{}),0,t,e)}async waitAsync(t){return new Promise((e=>{this.addTask((()=>{}),0,t,e)}))}}class n{constructor(t,e,i=0,s=(()=>{})){this.action=t,this.interval=e,this.intervalTimer=0,this.totalTime=0,this.duration=i,this.callback=s,this.isDone=!1}clear(){this.isDone=!0}update(t){this.intervalTimer+=t,this.totalTime+=t,0===this.interval?this.action(this.totalTime):this.intervalTimer>=this.interval&&(this.intervalTimer=0,this.action(t)),0!==this.duration&&this.totalTime>=this.duration&&(this.callback(),this.isDone=!0)}}},38:(t,e,i)=>{i.d(e,{Z:()=>s});class s{constructor(t=0,e=0){this.x=t,this.y=e}set(t,e){this.x=t,this.y=e}add(t,e=1){this.x+=t.x*e,this.y+=t.y*e}}},159:(t,e,i)=>{i.d(e,{Z:()=>h});var s=i(38),n=i(436),o=i(504),r=i(928),a=i(347);i(10);class h{constructor(t={x:0,y:0}){this.position=new s.Z(t.x,t.y),this.dimensions=new s.Z,this.velocity=new s.Z,this.totalHealth=0,this.health=this.totalHealth,this.hitbox=new n.Z,this.hitboxOffsets=new n.Z,this.sprites=[],this.stateMachine=null,this.currentAnimation=null,this.isDead=!1,this.cleanUp=!1,this.direction=0,this.level=null}update(t){this.stateMachine.update(t),this.currentAnimation.update(t),this.position.add(this.velocity,t),this.hitbox.set(this.position.x+this.hitboxOffsets.position.x,this.position.y+this.hitboxOffsets.position.y,this.dimensions.x+this.hitboxOffsets.dimensions.x,this.dimensions.y+this.hitboxOffsets.dimensions.y)}render(t={x:0,y:0}){const e=this.position.x+t.x,i=this.position.y+t.y;this.stateMachine.render(),this.direction===r.Z.Left?(o.Do.save(),o.Do.translate(Math.floor(this.position.x)+this.dimensions.x,Math.floor(this.position.y)),o.Do.scale(-1,1),this.sprites[this.currentAnimation.getCurrentFrame()].render(0,0),o.Do.restore()):this.sprites[this.currentAnimation.getCurrentFrame()].render(Math.floor(e),Math.floor(i)),o.eM&&this.hitbox.render(o.Do)}didCollideWithEntity(t){return this.hitbox.didCollide(t.hitbox)}didCollideWithEntity(t){return this.hitbox.didCollide(t)}didCollideWithObject(t){return this.hitbox.didCollide(t.hitbox)}getDistanceBetween(t){return Math.abs(this.hitbox.position.x-t.hitbox.position.x)}didCollideWithTiles(t){const e=this.getCollisionTilesByDirection(t);return 0!==e.length&&e.some((t=>null!=t))}getCollisionTilesByDirection(t){return this.getTilesByDirection(t)}getTilesByDirection(t){const e=[];return t.forEach((t=>{let i=0,s=0;switch(t){case r.Z.TopLeft:i=this.hitbox.position.x+2,s=this.hitbox.position.y;break;case r.Z.TopRight:i=this.hitbox.position.x+this.hitbox.dimensions.x-2,s=this.hitbox.position.y;break;case r.Z.RightTop:i=this.hitbox.position.x+this.hitbox.dimensions.x-1,s=this.hitbox.position.y+1;break;case r.Z.RightBottom:i=this.hitbox.position.x+this.hitbox.dimensions.x-1,s=this.hitbox.position.y+this.hitbox.dimensions.y-1;break;case r.Z.BottomRight:i=this.hitbox.position.x+this.hitbox.dimensions.x-1,s=this.hitbox.position.y+this.hitbox.dimensions.y;break;case r.Z.BottomLeft:i=this.hitbox.position.x+1,s=this.hitbox.position.y+this.hitbox.dimensions.y;break;case r.Z.LeftBottom:i=this.hitbox.position.x+1,s=this.hitbox.position.y+this.hitbox.dimensions.y-1;break;case r.Z.LeftTop:i=this.hitbox.position.x+1,s=this.hitbox.position.y+1;break;case r.Z.Down:i=this.hitbox.position.x+this.hitbox.dimensions.x/2,s=this.hitbox.position.y+this.hitbox.dimensions.y}i=Math.floor(i/a.Z.SIZE),s=Math.floor(s/a.Z.SIZE);const n=this.level.currentRoom.getTile(i,s);e.push(n)})),e}changeState(t,e){this.stateMachine.change(t,e)}receiveDamage(t){this.health=Math.max(this.health-t,0)}}},465:(t,e,i)=>{i.d(e,{Z:()=>f});var s=i(379),n=i(504),o=i(159),r=i(378),a=i(642),h=i(313),l=i(928),c=i(8),d=i(112);class p extends h.Z{constructor(t){super(),this.player=t,this.animation=new c.Z([0,1,2,3],.25)}enter(){this.player.sprites=this.player.idleSprites,this.player.currentAnimation=this.animation}update(){this.checkForMovement(),this.checkForShooting(),this.isGroundBelow()||this.player.changeState(d.Z.Falling),n.XP.Shift&&this.player.changeState(d.Z.Dodging)}checkForMovement(){n.XP.a&&(this.player.direction=l.Z.Left,this.player.changeState(d.Z.Walking)),n.XP.d&&(this.player.direction=l.Z.Right,this.player.changeState(d.Z.Walking)),n.XP[" "]&&this.player.changeState(d.Z.Jumping)}checkForShooting(){n.XP.z&&this.player.changeState(d.Z.Shooting)}isGroundBelow(){return this.player.didCollideWithTiles([l.Z.BottomLeft,l.Z.Down,l.Z.BottomRight])}}var m=i(436);class y extends h.Z{constructor(t){super(),this.player=t,this.animation=new c.Z([0,1,2,3,4,5,6,7],.12)}enter(){this.player.sprites=this.player.walkingSprites,this.player.currentAnimation=this.animation}update(t){n.XP[" "]&&this.player.changeState(d.Z.Jumping),n.XP.a||n.XP.d||0!==Math.abs(this.player.velocity.x)?n.XP.a&&!this.player.isCollisionLeft()?(this.player.direction=l.Z.Left,this.player.velocity.x=Math.max(this.player.velocity.x-this.player.speedScalar*this.player.frictionScalar,-f.VELOCITY_LIMIT)):n.XP.d&&!this.player.isCollisionRight()?(this.player.direction=l.Z.Right,this.player.velocity.x=Math.min(this.player.velocity.x+this.player.speedScalar*this.player.frictionScalar,f.VELOCITY_LIMIT)):this.stop():this.player.changeState(d.Z.Idle),n.XP.Shift&&this.player.changeState(d.Z.Dodging),this.isGroundBelow()||this.player.changeState(d.Z.Falling)}stop(){Math.abs(this.player.velocity.x)>0&&(this.player.velocity.x*=this.player.frictionScalar),Math.abs(this.player.velocity.x)<.1&&(this.player.velocity.x=0)}isGroundBelow(){return this.player.didCollideWithTiles([l.Z.BottomLeft,l.Z.Down,l.Z.BottomRight])}}var E=i(38),T=i(127),_=i(494);class u extends _.Z{static WIDTH=40;static HEIGHT=5;static VELOCITY=300;static POWER=5;constructor(t,e,i,s){super(t,e,new m.Z(e.x,e.y,t.x,t.y,"purple"),i,s),this.setVelocityAndDirection(),this.sprites=r.Z.generateSpritesFromSpriteSheet(n.Wc.get(a.Z.Arrow),u.WIDTH,u.HEIGHT),this.hitboxOffsets=new m.Z(0,0,0,0),this.power=u.POWER}update(t){super.update(t)}render(){this.direction==l.Z.Left?(n.Do.save(),n.Do.translate(Math.floor(this.position.x)+this.dimensions.x,Math.floor(this.position.y)),n.Do.scale(-1,1),this.sprites[this.currentFrame].render(0,0),n.Do.restore(),n.eM&&this.hitbox.render(n.Do)):(super.render(),this.isStillOnscreen()||(this.cleanUp=!0))}setVelocityAndDirection(){this.shooter.direction===l.Z.Right?(this.velocity=new E.Z(u.VELOCITY,0),this.direction=l.Z.Right):this.shooter.direction===l.Z.Left&&(this.velocity=new E.Z(-u.VELOCITY,0),this.direction=l.Z.Left)}isStillOnscreen(){return this.position.x>this.shooter.level.camera.position.x&&this.position.x<this.shooter.level.camera.position.x+this.shooter.level.camera.viewport.x}}class I extends h.Z{constructor(t){super(),this.player=t,this.animation=new c.Z([0,1,2,3,4,5,6],.05,1)}enter(){this.player.sprites=this.player.shootingSprites,this.player.currentAnimation=this.animation}update(){if(this.player.currentAnimation.isDone()){let t;t=this.player.direction==l.Z.Left?new E.Z(this.player.hitbox.position.x-this.player.hitbox.dimensions.x/2,this.player.hitbox.position.y+this.player.hitbox.dimensions.y/4):new E.Z(this.player.hitbox.position.x+this.player.hitbox.dimensions.x/2,this.player.hitbox.position.y+this.player.hitbox.dimensions.y/4),this.player.level.currentRoom.objects.push(new u(new E.Z(u.WIDTH,u.HEIGHT),t,new E.Z(u.VELOCITY,0),this.player)),n.jX.play(T.Z.Laser),this.player.currentAnimation.refresh(),this.player.changeState(d.Z.Idle)}}}class S extends h.Z{constructor(t){super(),this.player=t,this.animation=new c.Z([0,1,2,3],.15,1)}enter(){this.player.velocity.y=this.player.jumpForce.y,this.player.sprites=this.player.jumpingSprites,this.animation=new c.Z([0,1,2,3],.15,1),this.player.currentAnimation=this.animation}update(t){this.player.velocity.y>=0&&(this.player.currentAnimation.refresh(),this.player.changeState(d.Z.Falling)),this.player.currentAnimation.isDone()&&(this.player.currentAnimation.refresh(),this.animation=new c.Z([0],1),this.player.sprites=this.player.fallingSprites,this.player.currentAnimation=this.animation),this.player.velocity.add(this.player.gravityForce,t)}}var g=i(347);class R extends h.Z{constructor(t){super(),this.player=t,this.animation=new c.Z([1],.5)}enter(){this.player.sprites=this.player.fallingSprites,this.player.currentAnimation=this.animation}update(t){this.player.velocity.add(this.player.gravityForce,t),this.player.position.y>this.player.level.currentRoom.dimensions.y*g.Z.SIZE&&this.player.changeState(d.Z.Dying),this.isTileCollisionBelowRight()||this.isTileCollisionBelowLeft()?this.onTileCollision():n.XP.a?(this.player.direction=l.Z.Left,this.player.velocity.x=Math.max(this.player.velocity.x-this.player.speedScalar*this.player.frictionScalar,-f.VELOCITY_LIMIT)):n.XP.d?(this.player.direction=l.Z.Right,this.player.velocity.x=Math.min(this.player.velocity.x+this.player.speedScalar*this.player.frictionScalar,f.VELOCITY_LIMIT)):(Math.abs(this.player.velocity.x)>0&&(this.player.velocity.x*=this.player.frictionScalar),Math.abs(this.player.velocity.x)<.1&&(this.player.velocity.x=0))}isTileCollisionBelowRight(){return this.player.getTilesByDirection([l.Z.RightBottom,l.Z.RightTop]).some((t=>null!=t))}isTileCollisionBelowLeft(){return this.player.getTilesByDirection([l.Z.LeftBottom,l.Z.LeftTop]).some((t=>null!=t))}onTileCollision(){const t=this.player.getTilesByDirection([l.Z.BottomRight])[0],e=this.player.getTilesByDirection([l.Z.BottomLeft])[0];(t||e)&&(this.player.velocity.y=0),n.XP.a||n.XP.d||Math.abs(this.player.velocity.x)>0?this.player.changeState(d.Z.Walking):this.player.changeState(d.Z.Idle)}}class Z extends h.Z{constructor(t){super(),this.player=t,this.animation=new c.Z([0,1],.05,1)}enter(t){this.player.receiveDamage(t.damage),n.jX.play(T.Z.PlayerHurt),this.player.becomeInvulnerable(),this.player.sprites=this.player.fallingSprites,this.player.currentAnimation=this.animation}update(){this.player.currentAnimation.isDone()&&(this.player.currentAnimation.refresh(),this.player.health>0?this.isGroundBelow()?this.player.changeState(d.Z.Idle):this.player.changeState(d.Z.Falling):this.player.changeState(d.Z.Dying))}isGroundBelow(){return this.player.didCollideWithTiles([l.Z.BottomLeft,l.Z.BottomRight])}}var D=i(408);class x extends h.Z{constructor(t){super(),this.player=t,this.animation=new c.Z([0,1,2,3,4,5,6,7],.1,1)}enter(){this.player.sprites=this.player.dyingSprites,this.player.currentAnimation=this.animation,n.jX.play(T.Z.PlayerDeath)}update(){this.player.currentAnimation.isDone()&&(this.player.lives--,this.player.isDead,this.player.lives<0?n.XE.change(D.Z.GameOver):(this.player.level.resetLevel(),this.player.changeState(d.Z.Idle)),this.animation.refresh())}}class A extends h.Z{constructor(t){super(),this.player=t,this.animation=new c.Z([0,1,2,3,4,5,6],.1,1)}enter(){this.player.sprites=this.player.dodgingSprites,this.player.currentAnimation=this.animation,this.player.isInvulnerable=!0}exit(){this.player.isInvulnerable=!1,this.player.velocity.x=0}update(t){this.player.currentAnimation.isDone()?(this.player.currentAnimation.refresh(),n.XP.a||n.XP.d?this.player.changeState(d.Z.Walking):this.player.changeState(d.Z.Idle)):this.move(t)}move(t){this.player.direction!=l.Z.Left||this.player.isCollisionLeft()?this.player.direction!=l.Z.Right||this.player.isCollisionRight()||(this.player.velocity.x=f.VELOCITY_LIMIT):this.player.velocity.x=-f.VELOCITY_LIMIT}}class f extends o.Z{static PLAYER_SPRITE_WIDTH=64;static PLAYER_SPRITE_HEIGHT=64;static X_OFFSET=-24;static Y_OFFSET=-16;static REAL_WIDTH=16;static REAL_HEIGHT=32;static WALKING_ROW_START=0;static WALKING_ROW_END=8;static DYING_ROW_START=8;static DYING_ROW_END=16;static ROLLING_ROW_START=16;static ROLLING_ROW_END=23;static SHOOTING_ROW_START=24;static SHOOTING_ROW_END=31;static CLINGING_ROW_START=32;static CLINGING_ROW_END=38;static IDLE_ROW_START=40;static IDLE_ROW_END=44;static JUMPING_ROW_START=48;static JUMPING_ROW_END=52;static FALLING_ROW_START=56;static FALLING_ROW_END=58;static INVULNERABLE_DURATION=2;static INVULNERABLE_FLASH_INTERVAL=.2;static MAX_HEALTH=32;static VELOCITY_LIMIT=200;constructor(){super(),this.allSprites=r.Z.generateSpritesFromSpriteSheet(n.Wc.get(a.Z.Player),f.PLAYER_SPRITE_WIDTH,f.PLAYER_SPRITE_HEIGHT),this.idleSprites=this.allSprites.slice(f.IDLE_ROW_START,f.IDLE_ROW_END),this.walkingSprites=this.allSprites.slice(f.WALKING_ROW_START,f.WALKING_ROW_END),this.shootingSprites=this.allSprites.slice(f.SHOOTING_ROW_START,f.SHOOTING_ROW_END),this.jumpingSprites=this.allSprites.slice(f.JUMPING_ROW_START,f.JUMPING_ROW_END),this.fallingSprites=this.allSprites.slice(f.FALLING_ROW_START,f.FALLING_ROW_END),this.dyingSprites=this.allSprites.slice(f.DYING_ROW_START,f.DYING_ROW_END),this.dodgingSprites=this.allSprites.slice(f.ROLLING_ROW_START,f.ROLLING_ROW_END),this.isInvulnerable=!1,this.invulnerabilityTimer=null,this.gravityForce=new E.Z(0,1e3),this.speedScalar=18,this.frictionScalar=.6,this.jumpForce=new E.Z(0,-350),this.totalHealth=f.MAX_HEALTH,this.health=this.totalHealth,this.hitboxOffsets=new m.Z(f.PLAYER_SPRITE_WIDTH/4,f.PLAYER_SPRITE_HEIGHT/4,-f.PLAYER_SPRITE_WIDTH/2,-f.PLAYER_SPRITE_HEIGHT/2),this.position.x=3*g.Z.SIZE,this.position.y=4*g.Z.SIZE,this.dimensions.x=f.PLAYER_SPRITE_WIDTH,this.dimensions.y=f.PLAYER_SPRITE_HEIGHT,this.stateMachine=this.initializeStateMachine(),this.alpha=1,this.lives=2}update(t){super.update(t)}render(){n.Do.save(),n.Do.globalAlpha=this.alpha,super.render(),n.Do.restore()}initializeStateMachine(){const t=new s.Z;return t.add(d.Z.Dodging,new A(this)),t.add(d.Z.Dying,new x(this)),t.add(d.Z.Hurt,new Z(this)),t.add(d.Z.Falling,new R(this)),t.add(d.Z.Jumping,new S(this)),t.add(d.Z.Shooting,new I(this)),t.add(d.Z.Walking,new y(this)),t.add(d.Z.Idle,new p(this)),t.change(d.Z.Idle),t}becomeInvulnerable(){this.isInvulnerable=!0,this.invulnerabilityTimer=this.startInvulnerabilityTimer()}startInvulnerabilityTimer(){const t=f.INVULNERABLE_FLASH_INTERVAL,e=f.INVULNERABLE_DURATION;return n.HT.addTask((()=>{this.alpha=1===this.alpha?.5:1}),t,e,(()=>{this.alpha=1,this.isInvulnerable=!1}))}isCollisionLeft(){return this.position.x<0||null!=this.getTilesByDirection([l.Z.TopLeft])[0]}isCollisionRight(){return this.position.x>this.level.currentRoom.dimensions.x*g.Z.SIZE||null!=this.getTilesByDirection([l.Z.TopRight])[0]}}},70:(t,e,i)=>{i.d(e,{Z:()=>S});var s=i(436),n=i(379),o=i(928),r=i(918),a=(i(231),i(347)),h=i(313),l=i(228);i(465);class c extends h.Z{constructor(t,e,i){super(),this.enemy=t,this.animation=e,this.player=i}enter(){this.enemy instanceof l.Z?(this.enemy.decideAttack(),this.enemy.currentAttack==l.Z.FIRST_ATTACK?(this.enemy.sprites=this.enemy.attackingSprites,this.enemy.currentAnimation=this.animation):(this.enemy.sprites=this.enemy.secondAttackSprites,this.enemy.currentAnimation=this.enemy.secondAttackAnimation)):(this.enemy.sprites=this.enemy.attackingSprites,this.enemy.currentAnimation=this.animation),this.enemy.velocity.x=0}exit(){this.enemy.meleeHitbox.set(0,0,0,0)}update(t){this.enemy.currentAnimation.isHalfwayDone()&&this.enemy.halfwayAttack(this.player.level.currentRoom),this.enemy.currentAnimation.isDone()&&(this.enemy.attack(this.player.level.currentRoom),this.enemy.currentAnimation.refresh(),this.enemy.getDistanceBetween(this.player)>=this.enemy.attackRange&&this.enemy.changeState(r.Z.Chasing))}}class d extends h.Z{constructor(t,e,i){super(),this.enemy=t,this.animation=e,this.player=i}enter(){this.enemy.sprites=this.enemy.roamingSprites,this.enemy.currentAnimation=this.animation}exit(){this.enemy.velocity.x=0}update(t){this.checkPlayerDistance(t)}move(t){this.setDirection(),this.enemy.direction!=o.Z.Left||this.enemy.isCollisionLeft()?this.enemy.direction!=o.Z.Right||this.enemy.isCollisionRight()?this.enemy.velocity.x=0:this.enemy.velocity.x=2*this.enemy.velocityLimit:this.enemy.velocity.x=2*-this.enemy.velocityLimit}checkPlayerDistance(t){this.enemy.getDistanceBetween(this.player)<=this.enemy.attackRange?this.enemy.changeState(r.Z.Attacking):this.enemy.getDistanceBetween(this.player)>this.enemy.aggroRange?this.enemy.changeState(r.Z.Roaming):this.move(t)}setDirection(){this.enemy.hitbox.position.x>this.player.hitbox.position.x?this.enemy.direction=o.Z.Left:this.enemy.direction=o.Z.Right}}var p=i(127),m=i(504);class y extends h.Z{constructor(t,e,i){super(),this.enemy=t,this.animation=e,this.player=i}enter(){m.jX.play(p.Z.EnemyDeath),this.enemy.sprites=this.enemy.dyingSprites,this.enemy.currentAnimation=this.animation,this.enemy.isDead=!0}update(t){this.enemy.currentAnimation.isDone()&&(this.enemy.cleanUp=!0)}}class E extends h.Z{constructor(t,e,i){super(),this.enemy=t,this.animation=e,this.player=i}enter(t){this.enemy.sprites=this.enemy.hurtSprites,this.enemy.currentAnimation=this.animation,this.enemy.receiveDamage(t.power)}update(t){this.enemy.currentAnimation.isDone()&&(this.enemy.currentAnimation.refresh(),this.enemy.health<=0?this.enemy.changeState(r.Z.Dying):this.checkPlayerDistance())}checkPlayerDistance(){this.enemy.getDistanceBetween(this.player)<=this.enemy.attackRange?this.enemy.changeState(r.Z.Attacking):this.enemy.changeState(r.Z.Chasing)}}var T=i(360);class _ extends h.Z{constructor(t,e,i){super(),this.enemy=t,this.animation=e,this.player=i}enter(){this.idleDuration=(0,T.D9)(2,5),this.enemy.sprites=this.enemy.idleSprites,this.enemy.currentAnimation=this.animation,this.startTimer()}exit(){this.timerTask?.clear()}update(t){this.checkPlayerDistance()}startTimer(){this.timerTask=m.HT.wait(this.idleDuration,(()=>this.enemy.changeState(r.Z.Roaming)))}checkPlayerDistance(){console.log("Distance between enemy and Player: "+this.enemy.getDistanceBetween(this.player)),this.enemy.getDistanceBetween(this.player)<=this.enemy.aggroRange&&this.enemy.changeState(r.Z.Chasing)}}class u extends h.Z{constructor(t,e,i){super(),this.enemy=t,this.animation=e,this.player=i}enter(){this.enemy.sprites=this.enemy.roamingSprites,this.enemy.currentAnimation=this.animation,this.reset(),this.startTimer()}exit(){this.enemy.velocity.x=0,this.timerTask?.clear()}update(t){this.checkPlayerDistance(),this.move(t)}startTimer(){this.timerTask=m.HT.wait(this.moveDuration,(()=>this.decideMovement()))}move(t){this.enemy.direction!=o.Z.Left||this.enemy.isCollisionLeft()?this.enemy.direction!=o.Z.Right||this.enemy.isCollisionRight()?this.enemy.velocity.x=0:this.enemy.velocity.x=this.enemy.velocityLimit:this.enemy.velocity.x=-this.enemy.velocityLimit}reset(){this.enemy.direction=(0,T.n8)(.5)?o.Z.Left:o.Z.Right,this.moveDuration=(0,T.D9)(2,5)}decideMovement(){(0,T.n8)(.5)?this.enemy.changeState(r.Z.Idle):(this.reset(),this.startTimer())}checkPlayerDistance(){console.log("Distance between enemy and Player: "+this.enemy.getDistanceBetween(this.player)),this.enemy.getDistanceBetween(this.player)<=this.enemy.aggroRange&&this.enemy.changeState(r.Z.Chasing)}}var I=i(159);class S extends I.Z{constructor(t,e){super(e),this.idleSprites=[],this.roamingSprites=[],this.attackingSprites=[],this.jumpingSprites=[],this.hurtSprites=[],this.dyingSprites=[],this.aggroRange=0,this.attackRange=0,this.collisionDamage=0,this.meleeDamage=0,this.meleeHitbox=new s.Z(0,0,0,0,"green"),this.player=t}update(t){super.update(t)}render(t={x:0,y:0}){super.render(t)}initializeStateMachine(t){const e=new n.Z;return e.add(r.Z.Dying,new y(this,t[r.Z.Dying],this.player)),e.add(r.Z.Hurt,new E(this,t[r.Z.Hurt],this.player)),e.add(r.Z.Attacking,new c(this,t[r.Z.Attacking],this.player)),e.add(r.Z.Chasing,new d(this,t[r.Z.Chasing],this.player)),e.add(r.Z.Roaming,new u(this,t[r.Z.Roaming],this.player)),e.add(r.Z.Idle,new _(this,t[r.Z.Idle],this.player)),e.change(r.Z.Idle),e}attack(t){}halfwayAttack(t){}setAboveTile(){for(;this.isWithinTile();)this.position.y++}isWithinTile(){return this.getTilesByDirection([o.Z.Down])}isCollisionLeft(){if(this.position.x<0)return!0;const t=this.getTilesByDirection([o.Z.Left,o.Z.LeftBottom]);return null!=t[0]||null==t[1]}isCollisionRight(){if(this.position.x>this.level.currentRoom.dimensions.x*a.Z.SIZE)return!0;const t=this.getTilesByDirection([o.Z.Right,o.Z.RightBottom]);return null!=t[0]||null==t[1]}getTilesByDirection(t){const e=[];return t.forEach((t=>{let i=0,s=0;switch(t){case o.Z.Left:i=this.hitbox.position.x,s=this.hitbox.position.y;break;case o.Z.LeftBottom:i=this.hitbox.position.x,s=this.hitbox.position.y+this.hitbox.dimensions.y;break;case o.Z.Right:i=this.hitbox.position.x+this.hitbox.dimensions.x,s=this.hitbox.position.y;break;case o.Z.RightBottom:i=this.hitbox.position.x+this.hitbox.dimensions.x,s=this.hitbox.position.y+this.hitbox.dimensions.y}const n=Math.floor(i/a.Z.SIZE),r=Math.floor(s/a.Z.SIZE),h=this.level.currentRoom.getTile(n,r);e.push(h)})),e}}},228:(t,e,i)=>{i.d(e,{Z:()=>o});var s=i(360),n=(i(231),i(465),i(70));class o extends n.Z{static AGGRO_RANGE=9999;static FIRST_ATTACK=0;static SECOND_ATTACK=1;constructor(t,e){super(t,e),this.aggroRange=o.AGGRO_RANGE,this.secondAttackSprites=[],this.secondAttackRange=0,this.secondAttackAnimation=null,this.idleInterval=0,this.currentAttack=o.FIRST_ATTACK}attack(t){this.currentAttack===o.FIRST_ATTACK?this.firstAttack(t):this.secondAttack(t)}halfwayAttack(t){this.currentAttack===o.FIRST_ATTACK?this.firstHalfwayAttack(t):this.secondHalfwayAttack(t)}firstAttack(t){}secondAttack(t){}firstHalfwayAttack(t){}secondHalfwayAttack(t){}decideAttack(){this.secondAttackRange<this.attackRange?this.getDistanceBetween(this.player)>this.secondAttackRange?this.currentAttack=o.FIRST_ATTACK:this.currentAttack=o.SECOND_ATTACK:this.currentAttack=(0,s.n8)(.5)?o.FIRST_ATTACK:o.SECOND_ATTACK}}},881:(t,e,i)=>{i.d(e,{Z:()=>p});var s=i(8),n=i(378),o=i(918),r=i(642),a=i(504),h=(i(465),i(228)),l=i(38),c=i(928),d=(i(231),i(127));class p extends h.Z{static SPRITE_WIDTH=250;static SPRITE_HEIGHT=250;static FIRST_ATTACK_RANGE=100;static VELOCITY_LIMIT=50;static REAL_WIDTH=60;static REAL_HEIGHT=72;static X_OFFSET=-90;static Y_OFFSET=-100;static MAX_HEALTH=64;static UPPER_FIRE_HALFWAY_X=60;static UPPER_FIRE_HALFWAY_Y=-24;static UPPER_FIRE_HALFWAY_WIDTH=80;static UPPER_FIRE_HALFWAY_HEIGHT=80;static UPPER_FIRE_HALFWAY_LEFT_X_OFFSET=20;static UPPER_FIRE_DONE_X=60;static UPPER_FIRE_DONE_Y=-24;static UPPER_FIRE_DONE_WIDTH=32;static UPPER_FIRE_DONE_HEIGHT=56;static UPPER_FIRE_DONE_LEFT_X_OFFSET=28;static LOWER_FIRE_HALFWAY_X=40;static LOWER_FIRE_HALFWAY_Y=-64;static LOWER_FIRE_HALFWAY_WIDTH=120;static LOWER_FIRE_HALFWAY_HEIGHT=136;static LOWER_FIRE_HALFWAY_LEFT_X_OFFSET=64;static MELEE_DAMAGE=16;static COLLISION_DAMAGE=4;constructor(t,e){super(t,e),this.idleSprites=n.Z.generateSpritesFromSpriteSheet(a.Wc.get(r.Z.EvilWizardIdle),p.SPRITE_WIDTH,p.SPRITE_HEIGHT),this.roamingSprites=n.Z.generateSpritesFromSpriteSheet(a.Wc.get(r.Z.EvilWizardRoaming),p.SPRITE_WIDTH,p.SPRITE_HEIGHT),this.attackingSprites=n.Z.generateSpritesFromSpriteSheet(a.Wc.get(r.Z.EvilWizardAttacking),p.SPRITE_WIDTH,p.SPRITE_HEIGHT),this.secondAttackSprites=n.Z.generateSpritesFromSpriteSheet(a.Wc.get(r.Z.EvilWizardSecondAttack),p.SPRITE_WIDTH,p.SPRITE_HEIGHT),this.hurtSprites=n.Z.generateSpritesFromSpriteSheet(a.Wc.get(r.Z.EvilWizardHurt),p.SPRITE_WIDTH,p.SPRITE_HEIGHT),this.dyingSprites=n.Z.generateSpritesFromSpriteSheet(a.Wc.get(r.Z.EvilWizardDeath),p.SPRITE_WIDTH,p.SPRITE_HEIGHT);const i={[o.Z.Idle]:new s.Z([0,1,2,3,4,5,6,7],.2),[o.Z.Roaming]:new s.Z([0,1,2,3,4,5,6,7],.15),[o.Z.Chasing]:new s.Z([0,1,2,3,4,5,6,7],.07),[o.Z.Attacking]:new s.Z([0,1,2,3,4,5,6,7],.15,1),[o.Z.Hurt]:new s.Z([0,1,2],.02,1),[o.Z.Dying]:new s.Z([0,1,2,3,4,5,6],.2,1)};this.secondAttackAnimation=new s.Z([0,1,2,3,4,5,6,7],.15,1),this.stateMachine=this.initializeStateMachine(i),this.dimensions.set(p.REAL_WIDTH,p.REAL_HEIGHT),this.velocityLimit=p.VELOCITY_LIMIT,this.attackRange=p.FIRST_ATTACK_RANGE,this.secondAttackRange=this.attackRange,this.renderOffsets=new l.Z(p.X_OFFSET,p.Y_OFFSET),this.totalHealth=p.MAX_HEALTH,this.health=this.totalHealth,this.meleeDamage=p.MELEE_DAMAGE,this.collisionDamage=p.COLLISION_DAMAGE}render(){this.direction==c.Z.Left?this.renderLeftMovement():super.render(this.renderOffsets),a.eM&&this.meleeHitbox.render(a.Do)}renderLeftMovement(){a.Do.save(),a.Do.translate(Math.floor(this.position.x)+this.dimensions.x,Math.floor(this.position.y)),a.Do.scale(-1,1),this.sprites[this.currentAnimation.getCurrentFrame()].render(this.renderOffsets.x,this.renderOffsets.y),a.Do.restore(),a.eM&&this.hitbox.render(a.Do)}firstHalfwayAttack(t){a.jX.play(d.Z.WizardFire),this.direction==c.Z.Left?this.meleeHitbox.set(this.position.x-p.UPPER_FIRE_HALFWAY_X-p.UPPER_FIRE_HALFWAY_LEFT_X_OFFSET,this.position.y+p.UPPER_FIRE_HALFWAY_Y,p.UPPER_FIRE_HALFWAY_WIDTH,p.UPPER_FIRE_HALFWAY_HEIGHT):this.meleeHitbox.set(this.position.x+p.UPPER_FIRE_HALFWAY_X,this.position.y+p.UPPER_FIRE_HALFWAY_Y,p.UPPER_FIRE_HALFWAY_WIDTH,p.UPPER_FIRE_HALFWAY_HEIGHT)}firstAttack(t){this.direction==c.Z.Left?this.meleeHitbox.set(this.position.x-p.UPPER_FIRE_DONE_X+p.UPPER_FIRE_DONE_LEFT_X_OFFSET,this.position.y+p.UPPER_FIRE_DONE_Y,p.UPPER_FIRE_DONE_WIDTH,p.UPPER_FIRE_DONE_HEIGHT):this.meleeHitbox.set(this.position.x+p.UPPER_FIRE_DONE_X,this.position.y+p.UPPER_FIRE_DONE_Y,p.UPPER_FIRE_DONE_WIDTH,p.UPPER_FIRE_DONE_HEIGHT)}secondHalfwayAttack(t){a.jX.play(d.Z.WizardFire),this.direction==c.Z.Left?this.meleeHitbox.set(this.position.x-p.LOWER_FIRE_HALFWAY_X-p.LOWER_FIRE_HALFWAY_LEFT_X_OFFSET,this.position.y+p.LOWER_FIRE_HALFWAY_Y,p.LOWER_FIRE_HALFWAY_WIDTH,p.LOWER_FIRE_HALFWAY_HEIGHT):this.meleeHitbox.set(this.position.x+p.LOWER_FIRE_HALFWAY_X,this.position.y+p.LOWER_FIRE_HALFWAY_Y,p.LOWER_FIRE_HALFWAY_WIDTH,p.LOWER_FIRE_HALFWAY_HEIGHT)}}},928:(t,e,i)=>{i.d(e,{Z:()=>s});const s={Up:0,Down:1,Left:2,Right:3,TopLeft:4,TopRight:5,RightTop:6,RightBottom:7,BottomRight:8,BottomLeft:9,LeftBottom:10,LeftTop:11}},918:(t,e,i)=>{i.d(e,{Z:()=>s});const s={Idle:"idle",Roaming:"roaming",Chasing:"chasing",Attacking:"attacking",Hurt:"hurt",Dying:"dying"}},858:(t,e,i)=>{i.d(e,{Z:()=>s});const s={ShiftLeft:"shift-left",ShiftRight:"shift-right",StartBossIntro:"start-boss-intro"}},408:(t,e,i)=>{i.d(e,{Z:()=>s});const s={GameOver:"game-over",Play:"play",Victory:"victory",TitleScreen:"title-screen",LevelSelect:"level-select",Controls:"controls",BossIntro:"boss-intro",BossFight:"boss-fight",BossDeath:"boss-death",LevelVictory:"level-victory"}},642:(t,e,i)=>{i.d(e,{Z:()=>s});const s={Player:"player",RuinsEnlarged:"ruins-enlarged",CityEnlarged:"city-enlarged",Arrow:"arrow",BotwheelIdle:"botwheel-idle",BotwheelRoaming:"botwheel-roaming",BotwheelAttacking:"botwheel-attacking",BotwheelShooting:"botwheel-shooting",BotwheelBullet:"botwheel-bullet",BotWheelHurt:"botwheel-hurt",BotWheelDeath:"botwheel-death",StormheadIdle:"stormhead-idle",StormheadRoaming:"stormhead-roaming",StormheadAttacking:"stormhead-attacking",StormheadHurt:"stormhead-hurt",StormheadDeath:"stormhead-death",EvilWizardIdle:"evil-wizard-idle",EvilWizardRoaming:"evil-wizard-roaming",EvilWizardAttacking:"evil-wizard-attacking",EvilWizardHurt:"evil-wizard-hurt",EvilWizardDeath:"evil-wizard-death",EvilWizardSecondAttack:"evil-wizard-second-attack",IndustrialBg:"industrial-bg",IndustrialBuildings:"industrial-buildings",IndustrialFarBuildings:"industrial-far-buildings",IndustrialForeground:"industrial-foreground"}},112:(t,e,i)=>{i.d(e,{Z:()=>s});const s={Idle:"idle",Walking:"walking",Shooting:"shooting",Jumping:"jumping",Falling:"falling",Hurt:"hurt",Dying:"dying",Dodging:"dodging"}},127:(t,e,i)=>{i.d(e,{Z:()=>s});const s={Laser:"laser",PlayerHurt:"player-hurt",PlayerDeath:"player-death",EnemyDeath:"enemy-death",DoorOpening:"door-opening",BossIntro:"boss-intro",BossFight:"boss-fight",LevelVictory:"level-victory",Industrial:"industrial",WizardFire:"wizard-fire",WheelBotShoot:"wheelbot-shoot",StormheadZap:"stormhead-zap"}},504:(t,e,i)=>{i.d(e,{lf:()=>c,vj:()=>l,eM:()=>_,JQ:()=>a,Do:()=>h,Rq:()=>m,Wc:()=>p,XP:()=>d,jX:()=>T,XE:()=>y,HT:()=>E});class s{constructor(t,e,i,s){this.image=new Image(e,i),this.image.src=t,this.width=e,this.height=i,this.context=s}render(t,e,i=this.width,s=this.height){this.context.drawImage(this.image,t,e,i,s)}}class n{constructor(t,e=1,i,s=!1){this.source=t,this.size=e,this.volume=i,this.loop=s,this.pool=[],this.currentSound=0,this.initializePool()}initializePool(){for(let t=0;t<this.size;t++){const t=new Audio(this.source);t.volume=this.volume,t.loop=this.loop,this.pool.push(t)}}play(){(0===this.pool[this.currentSound].currentTime||this.pool[this.currentSound].ended||this.pool[this.currentSound].paused)&&this.pool[this.currentSound].play(),this.currentSound=(this.currentSound+1)%this.size}pause(){this.pool[this.currentSound].pause()}isPaused(){return this.pool[this.currentSound].paused}stop(){this.pause(),this.pool[this.currentSound].currentTime=0}}var o=i(379),r=i(50);const a=document.createElement("canvas"),h=a.getContext("2d")||new CanvasRenderingContext2D,l=600,c=350,d={},p=new class{constructor(t){this.context=t,this.images={}}load(t){t.forEach((t=>{this.images[t.name]=new s(t.path,t.width,t.height,this.context)}))}get(t){return this.images[t]}render(t,e,i,s=null,n=null){const o=this.get(t);o.render(e,i,s??o.width,n??o.height)}}(h),m=new class{constructor(){this.fonts={}}load(t){t.forEach((t=>{const e=new FontFace(t.name,`url(${t.path})`);this.fonts[t.name]=e,e.load().then((t=>{document.fonts.add(t)}))}))}get(t){return this.fonts[t]}},y=new o.Z,E=new r.Z,T=new class{constructor(){this.sounds={}}load(t){t.forEach((t=>{this.sounds[t.name]=new n(t.path,t.size,t.volume,t.loop)}))}get(t){return this.sounds[t]}play(t){this.get(t).play()}pause(t){this.get(t).pause()}stop(t){this.get(t).stop()}},_=!1},225:(t,e,i)=>{i.a(t,(async(t,e)=>{try{var s=i(408),n=i(785),o=i(504),r=i(204),a=i(729),h=i(976),l=i(854),c=i(626),d=i(258),p=i(751),m=i(978),y=i(621),E=i(993);o.JQ.width=o.vj,o.JQ.height=o.lf,o.JQ.setAttribute("tabindex","1"),document.body.appendChild(o.JQ);const{images:t,fonts:T,sounds:_}=await fetch("./config/config.json").then((t=>t.json())),u=(await fetch("./config/test_map_2.json").then((t=>t.json())),await fetch("./config/city_test_map.json").then((t=>t.json())),await fetch("./config/city_test_map_2.json").then((t=>t.json()))),I=await fetch("./config/city_test_map_2_room_2.json").then((t=>t.json())),S=await fetch("./config/city_boss_room.json").then((t=>t.json())),g=await fetch("./config/city_enemies.json").then((t=>t.json())),R={mapDefinitions:[[u,I,S]],enemyDefinitions:[g],doorDefinitions:[await fetch("./config/city_doors.json").then((t=>t.json()))],bossNameDefinitions:await fetch("./config/boss_names.json").then((t=>t.json()))};o.Wc.load(t),o.Rq.load(T),o.jX.load(_),o.XE.add(s.Z.LevelVictory,new E.Z),o.XE.add(s.Z.BossDeath,new y.Z),o.XE.add(s.Z.BossFight,new m.Z),o.XE.add(s.Z.BossIntro,new p.Z),o.XE.add(s.Z.LevelSelect,new d.Z(R)),o.XE.add(s.Z.Controls,new c.Z),o.XE.add(s.Z.TitleScreen,new l.Z),o.XE.add(s.Z.GameOver,new a.Z),o.XE.add(s.Z.Victory,new h.Z),o.XE.add(s.Z.Play,new r.Z),o.XE.change(s.Z.TitleScreen),o.JQ.addEventListener("keydown",(t=>{o.XP[t.key]=!0})),o.JQ.addEventListener("keyup",(t=>{o.XP[t.key]=!1})),new n.Z(o.XE,o.Do,o.JQ.width,o.JQ.height).start(),o.JQ.focus(),e()}catch(t){e(t)}}),1)},10:(t,e,i)=>{i.d(e,{Z:()=>o});var s=i(663),n=(i(159),i(928));class o{constructor(t,e,i){this.dimensions=t,this.position=e,this.hitbox=i,this.sprites=[],this.currentFrame=0,this.cleanUp=!1,this.isSolid=!1,this.isCollidable=!1,this.isConsumable=!1,this.wasCollided=!1,this.wasConsumed=!1}update(t){}render(){this.sprites[this.currentFrame].render(this.position.x,this.position.y)}onConsume(){this.wasConsumed=!0}onCollision(t){if(this.wasCollided=!0,this.isSolid){const e=(0,s.O)(this.hitbox.position.x,this.hitbox.position.y,this.hitbox.dimensions.x,this.hitbox.dimensions.y,t.hitbox.position.x,t.hitbox.position.y,t.hitbox.dimensions.x,t.hitbox.dimensions.y);e==n.Z.Left&&(t.position.x=this.hitbox.position.x-Math.abs(t.position.x-t.hitbox.position.x)-t.dimensions.x),e==n.Z.Right&&(t.position.x=this.hitbox.position.x+this.hitbox.dimensions.x-Math.abs(t.position.x-t.hitbox.position.x))}}didCollideWithEntity(t){return(0,s.y)(this.hitbox.position.x,this.hitbox.position.y,this.hitbox.dimensions.x,this.hitbox.dimensions.y,t.position.x,t.position.y,t.dimensions.x,t.dimensions.y)}}},680:(t,e,i)=>{i.d(e,{Z:()=>y});var s=i(38),n=(i(465),i(928)),o=i(858),r=i(408),a=i(504);i(159);class h{constructor(t,e,i){this.subject=t,this.scene=e,this.viewport=i,this.position=new s.Z(0,0)}update(){this.position=this.getNewPosition()}getNewPosition(){const t=new s.Z(0,0),e=Math.min(this.scene.x-this.viewport.x,this.subject.position.x-(this.viewport.x/2-this.subject.dimensions.x/2)),i=Math.min(this.scene.y-this.viewport.y,this.subject.position.y-(this.viewport.y/2-this.subject.dimensions.y/2));return t.x=Math.max(0,Math.floor(e)),t.y=Math.max(0,Math.floor(i)),t}}var l=i(347),c=i(378),d=i(642);class p{static BACKGROUND_WIDTH=272;static BACKGROUND_HEIGHT=160;static BUILDINGS_WIDTH=272;static BUILDINGS_HEIGHT=150;static FAR_BUILDINGS_WIDTH=213;static FAR_BUILDINGS_HEIGHT=142;static FOREGROUND_WIDTH=272;static FOREGROUND_HEIGHT=104;static CAMERA_SCALE=10;static BACKGROUND_SCALE={x:2,y:2};constructor(t){this.camera=t,this.position=new s.Z(0,0),this.backgroundSprite=c.Z.generateSpritesFromSpriteSheet(a.Wc.get(d.Z.IndustrialBg),p.BACKGROUND_WIDTH,p.BACKGROUND_HEIGHT)[0],this.buildingsSprite=c.Z.generateSpritesFromSpriteSheet(a.Wc.get(d.Z.IndustrialBuildings),p.BACKGROUND_WIDTH,p.BUILDINGS_HEIGHT)[0],this.farBuildingsSprite=c.Z.generateSpritesFromSpriteSheet(a.Wc.get(d.Z.IndustrialFarBuildings),p.FAR_BUILDINGS_WIDTH,p.FAR_BUILDINGS_HEIGHT)[0],this.foregroundSprite=c.Z.generateSpritesFromSpriteSheet(a.Wc.get(d.Z.IndustrialForeground),p.FOREGROUND_WIDTH,p.FOREGROUND_HEIGHT)[0]}update(){this.position.x=this.camera.position.x/p.CAMERA_SCALE}render(){for(let t=0;t<a.vj/p.BACKGROUND_WIDTH;t++)this.backgroundSprite.render(t*p.BACKGROUND_WIDTH-this.position.x,0,p.BACKGROUND_SCALE);for(let t=0;t<a.vj/p.FAR_BUILDINGS_WIDTH;t++)this.farBuildingsSprite.render(t*p.FAR_BUILDINGS_WIDTH-this.position.x,0,p.BACKGROUND_SCALE);for(let t=0;t<a.vj/p.BUILDINGS_WIDTH;t++)this.buildingsSprite.render(t*p.BUILDINGS_WIDTH-this.position.x,0,p.BACKGROUND_SCALE);for(let t=0;t<a.vj/(p.FOREGROUND_WIDTH*p.BACKGROUND_SCALE.x);t++)this.foregroundSprite.render(t*p.FOREGROUND_WIDTH-this.position.x,a.lf/2,p.BACKGROUND_SCALE)}}var m=i(231);class y{static START_BOSS_INTRO=new Event(o.Z.StartBossIntro);constructor(t,e,i,n,r,c){this.player=t,this.rooms=this.initializeRooms(e,i,n),this.currentRoom=this.rooms[0]??null,this.roomIndex=0,this.camera=new h(this.player,new s.Z(this.currentRoom.dimensions.x*l.Z.SIZE,this.currentRoom.dimensions.y*l.Z.SIZE),new s.Z(a.vj,a.lf)),this.isShifting=!1,this.player.level=this,this.bossDefinition=r,this.background=new p(this.camera),this.rooms.forEach((t=>{t.enemies.forEach((t=>{t.level=this}))})),this.mapDefinitions=e,this.enemyDefinitions=i,this.doorDefinitions=n,this.bossDefinition=r,this.levelIndex=c,a.JQ.addEventListener(o.Z.ShiftLeft,(()=>this.beginShifting(new s.Z(this.currentRoom.dimensions.x*l.Z.SIZE,0)))),a.JQ.addEventListener(o.Z.ShiftRight,(()=>this.beginShifting(new s.Z(-this.currentRoom.dimensions.x*l.Z.SIZE,0))))}update(t){this.background.update(),this.currentRoom?.update(t),this.isShifting||this.camera.update(),this.roomIndex==this.rooms.length-1&&this.currentRoom==this.rooms[this.roomIndex]&&a.JQ.dispatchEvent(y.START_BOSS_INTRO)}render(){a.Do.save(),a.Do.translate(-this.camera.position.x,-this.camera.position.y),this.background.render(),this.currentRoom?.render(),this.nextRoom?.render(),a.Do.restore()}initializeRooms(t,e,i){let s=[];for(let n=0;n<t.length;n++){const o=t[n],r=e.rooms[n],a=i.rooms[n];s.push(new m.Z(this.player,o,r,a,this.isShifting))}return s}beginShifting(t){this.isShifting=!0,this.currentRoom.isShifting=!0;const e=this.prepareRoomAndPlayerForShift(t);this.tweenRoomAndPlayer(t,e)}prepareRoomAndPlayerForShift(t){return this.nextRoom=this.rooms[++this.roomIndex],this.nextRoom.isShifting=!0,this.nextRoom.adjacentOffset.set(t.x,t.y),this.getNewPlayerPosition(t)}getNewPlayerPosition(t){let e=new s.Z(this.player.position.x,this.player.position.y),i=(a.vj-this.nextRoom.width*l.Z.SIZE)/2;return t.x>0?e.x=a.vj+(i+l.Z.SIZE):e.x=-a.vj+(i+this.nextRoom.width*l.Z.SIZE-l.Z.SIZE),e}tweenRoomAndPlayer(t,e){this.camera.scene.set(this.nextRoom.dimensions.x*l.Z.SIZE,this.currentRoom.dimensions.y*l.Z.SIZE),a.HT.tween(this.camera.position,["x","y"],[t.x,t.y],1,(()=>{})),a.HT.tween(this.player.position,["x","y"],[e.x,e.y],1,(()=>{this.finishShifting(t)}))}finishShifting(t){this.isShifting=!1,this.resetRooms(),this.camera.scene.set(this.currentRoom.dimensions.x*l.Z.SIZE,this.currentRoom.dimensions.y*l.Z.SIZE),this.camera.position.set(0,0),this.resetPlayer(t)}resetRooms(){this.nextRoom&&(this.currentRoom.isShifting=!1,this.nextRoom.isShifting=!1,this.currentRoom=this.nextRoom,this.nextRoom=null,this.currentRoom.adjacentOffset.set(0,0))}resetPlayer(t){t.x<0?(this.player.position.x=this.currentRoom.width*l.Z.SIZE-l.Z.SIZE-this.player.dimensions.x,this.player.direction=n.Z.Left):this.player.position.x=l.Z.SIZE}resetLevel(){this.player.position.set(l.Z.SIZE,l.Z.SIZE),this.player.health=this.player.totalHealth,a.XE.change(r.Z.Play,{player:this.player,mapDefinitions:this.mapDefinitions,enemyDefinitions:this.enemyDefinitions,doorDefinitions:this.doorDefinitions,bossDefinition:this.bossDefinition,levelIndex:this.levelIndex})}}},494:(t,e,i)=>{i.d(e,{Z:()=>o});var s=i(10),n=(i(159),i(504));class o extends s.Z{constructor(t,e,i,s,n){super(t,e,i),this.shooter=n,this.velocity=s,this.power=0}update(t){super.update(t),this.position.add(this.velocity,t),this.hitbox.set(this.position.x+this.hitboxOffsets?.position.x,this.position.y+this.hitboxOffsets?.position.y,this.dimensions.x+this.hitboxOffsets?.dimensions.x,this.dimensions.y+this.hitboxOffsets?.dimensions.y)}render(){super.render(),n.eM&&this.hitbox.render(n.Do)}}},231:(t,e,i)=>{i.d(e,{Z:()=>L});var s=i(767),n=i(378),o=i(38),r=i(881);const a="wheelbot",h="stormhead",l="evil-wizard";var c=i(465),d=i(8),p=i(928),m=i(918),y=i(642),E=i(127),T=i(504),_=i(70);class u extends _.Z{static SHEET_WIDTH=119;static SHEET_HEIGHT=124;static AGGRO_RANGE=150;static ATTACK_RANGE=75;static VELOCITY=25;static X_OFFSET=-40;static Y_OFFSET=-88;static REAL_WIDTH=24;static REAL_HEIGHT=40;static FORWARD_LIGHTNING_X=24;static FORWARD_LIGHTNING_Y=-32;static FORWARD_LIGHTNING_WIDTH=56;static FORWARD_LIGHTNING_HEIGHT=72;static REAR_LIGHTNING_X=-48;static REAR_LIGHTNING_Y=-32;static REAR_LIGHTNING_WIDTH=56;static REAR_LIGHTNING_HEIGHT=72;static LIGHTNING_DAMAGE=10;static TOTAL_HEALTH=10;constructor(t,e){super(t,e),this.idleSprites=n.Z.generateSpritesFromSpriteSheet(T.Wc.get(y.Z.StormheadIdle),u.SHEET_WIDTH,u.SHEET_HEIGHT),this.roamingSprites=n.Z.generateSpritesFromSpriteSheet(T.Wc.get(y.Z.StormheadRoaming),u.SHEET_WIDTH,u.SHEET_HEIGHT),this.attackingSprites=n.Z.generateSpritesFromSpriteSheet(T.Wc.get(y.Z.StormheadAttacking),u.SHEET_WIDTH,u.SHEET_HEIGHT),this.hurtSprites=n.Z.generateSpritesFromSpriteSheet(T.Wc.get(y.Z.StormheadHurt),u.SHEET_WIDTH,u.SHEET_HEIGHT),this.dyingSprites=n.Z.generateSpritesFromSpriteSheet(T.Wc.get(y.Z.StormheadDeath),u.SHEET_WIDTH,u.SHEET_HEIGHT);const i={[m.Z.Idle]:new d.Z([0,1,2,3,4,5,6,7,8],.2),[m.Z.Roaming]:new d.Z([0,1,2,3,4,5,6,7,8,9],.1),[m.Z.Chasing]:new d.Z([0,1,2,3,4,5,6,7,8,9],.05),[m.Z.Attacking]:new d.Z([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],.02,1),[m.Z.Hurt]:new d.Z([0,1],.1,1),[m.Z.Dying]:new d.Z([0,1,2,3,4,5,6,7,8],.1,1)};this.dimensions.set(u.REAL_WIDTH,u.REAL_HEIGHT),this.stateMachine=this.initializeStateMachine(i),this.velocityLimit=u.VELOCITY,this.renderOffsets=new o.Z(u.X_OFFSET,u.Y_OFFSET),this.aggroRange=u.AGGRO_RANGE,this.attackRange=u.ATTACK_RANGE,this.totalHealth=u.TOTAL_HEALTH,this.health=this.totalHealth,this.meleeDamage=u.LIGHTNING_DAMAGE}render(){this.direction==p.Z.Left?this.renderLeftMovement():super.render(this.renderOffsets),T.eM&&this.meleeHitbox.render(T.Do)}renderLeftMovement(){T.Do.save(),T.Do.translate(Math.floor(this.position.x)+this.dimensions.x,Math.floor(this.position.y)),T.Do.scale(-1,1),this.sprites[this.currentAnimation.getCurrentFrame()].render(this.renderOffsets.x,this.renderOffsets.y),T.Do.restore(),T.eM&&this.hitbox.render(T.Do)}attack(t){T.jX.play(E.Z.StormheadZap),this.direction==p.Z.Left?this.meleeHitbox.set(this.position.x-8-u.REAR_LIGHTNING_X/2,this.position.y+u.REAR_LIGHTNING_Y,u.REAR_LIGHTNING_WIDTH,u.REAR_LIGHTNING_HEIGHT):this.meleeHitbox.set(this.position.x+u.REAR_LIGHTNING_X,this.position.y+u.REAR_LIGHTNING_Y,u.REAR_LIGHTNING_WIDTH,u.REAR_LIGHTNING_HEIGHT)}halfwayAttack(t){T.jX.play(E.Z.StormheadZap),this.direction==p.Z.Left?this.meleeHitbox.set(this.position.x-u.FORWARD_LIGHTNING_WIDTH,this.position.y+u.FORWARD_LIGHTNING_Y,u.FORWARD_LIGHTNING_WIDTH,u.FORWARD_LIGHTNING_HEIGHT):this.meleeHitbox.set(u.FORWARD_LIGHTNING_X+this.position.x,u.FORWARD_LIGHTNING_Y+this.position.y,u.FORWARD_LIGHTNING_WIDTH,u.FORWARD_LIGHTNING_HEIGHT),T.eM&&this.meleeHitbox.render(T.Do)}}var I=i(436),S=i(494);class g extends S.Z{static TIME_TO_LIVE=1;static VELOCITY=250;static SHEET_WIDTH=117;static SPRITE_HEIGHT=26;static WIDTH=16;static Y_BOTTOM_OFFSET=-10;static Y_TOP_OFFSET=2;static POWER=2;constructor(t,e,i,s){super(t,e,new I.Z(e.x,e.y,t.x,t.y,"blue"),i,s),this.sprites=n.Z.generateSpritesFromSpriteSheet(T.Wc.get(y.Z.BotwheelBullet),g.SHEET_WIDTH,g.SPRITE_HEIGHT),this.hitboxOffsets=this.setHitboxOffsets(),this.power=g.POWER,this.startTimer()}render(){this.velocity.x<0?(T.Do.save(),T.Do.translate(Math.floor(this.position.x)+this.dimensions.x,Math.floor(this.position.y)),T.Do.scale(-1,1),this.sprites[this.currentFrame].render(0,0),T.Do.restore(),T.eM&&this.hitbox.render(T.Do)):super.render()}startTimer(){this.timerTask=T.HT.wait(g.TIME_TO_LIVE,(()=>this.cleanUp=!0))}setHitboxOffsets(){return this.velocity.x<0?new I.Z(2*-g.WIDTH,g.Y_TOP_OFFSET,0,g.Y_BOTTOM_OFFSET):new I.Z(2*g.WIDTH,g.Y_TOP_OFFSET,0,g.Y_BOTTOM_OFFSET)}}class R extends _.Z{static SHEET_WIDTH=117;static SHEET_HEIGHT=26;static REAL_WIDTH=15;static REAL_HEIGHT=26;static AGGRO_RANGE=200;static ATTACK_RANGE=100;static VELOCITY=50;static X_OFFSET=-15;static PLACEMENT_Y_OFFSET=7;static TOTAL_HEALTH=8;static COLLISION_DAMAGE=3;constructor(t,e){super(t,e),this.idleSprites=n.Z.generateSpritesFromSpriteSheet(T.Wc.get(y.Z.BotwheelIdle),R.SHEET_WIDTH,R.SHEET_HEIGHT),this.roamingSprites=n.Z.generateSpritesFromSpriteSheet(T.Wc.get(y.Z.BotwheelRoaming),R.SHEET_WIDTH,R.SHEET_HEIGHT),this.attackingSprites=n.Z.generateSpritesFromSpriteSheet(T.Wc.get(y.Z.BotwheelAttacking),R.SHEET_WIDTH,R.SHEET_HEIGHT),this.shootingSprites=n.Z.generateSpritesFromSpriteSheet(T.Wc.get(y.Z.BotwheelShooting),R.SHEET_WIDTH,R.SHEET_HEIGHT),this.hurtSprites=n.Z.generateSpritesFromSpriteSheet(T.Wc.get(y.Z.BotWheelHurt),R.SHEET_WIDTH,R.SHEET_HEIGHT),this.dyingSprites=n.Z.generateSpritesFromSpriteSheet(T.Wc.get(y.Z.BotWheelDeath),R.SHEET_WIDTH,R.SHEET_HEIGHT);const i={[m.Z.Idle]:new d.Z([0],1),[m.Z.Roaming]:new d.Z([0,1,2,3,4,5,6,7],.12),[m.Z.Chasing]:new d.Z([0,1,2,3,4,5,6,7],.06),[m.Z.Attacking]:new d.Z([0,1,2,3],.25,1),[m.Z.Hurt]:new d.Z([0,1],.1,1),[m.Z.Dying]:new d.Z([0,1,2,3,4,5],.15,1)};this.dimensions.x=R.REAL_WIDTH,this.dimensions.y=R.REAL_HEIGHT,this.stateMachine=this.initializeStateMachine(i),this.velocityLimit=R.VELOCITY,this.hitboxOffsets=new I.Z(0,0,0,0),this.renderOffsets=new o.Z(R.X_OFFSET,0),this.gravityForce=new o.Z(0,1e3),this.aggroRange=R.AGGRO_RANGE,this.attackRange=R.ATTACK_RANGE,this.collisionDamage=R.COLLISION_DAMAGE,this.totalHealth=R.TOTAL_HEALTH,this.health=this.totalHealth,this.position.y+=R.PLACEMENT_Y_OFFSET}render(){this.direction==p.Z.Left?(this.renderOffsets.set(-R.X_OFFSET,0),this.renderLeftMovement()):(this.renderOffsets.set(R.X_OFFSET,0),super.render(this.renderOffsets))}renderLeftMovement(){T.Do.save(),T.Do.translate(Math.floor(this.position.x)+this.dimensions.x,Math.floor(this.position.y)),T.Do.scale(-1,1),this.sprites[this.currentAnimation.getCurrentFrame()].render(-this.renderOffsets.x,0),T.Do.restore(),T.eM&&this.hitbox.render(T.Do)}attack(t){console.log("Shooting at the player!"),this.sprites=this.shootingSprites,this.animation=new d.Z([0,1,2,3],.1,1),T.jX.play(E.Z.WheelBotShoot);let e=this.direction==p.Z.Left?new o.Z(-g.VELOCITY,0):new o.Z(g.VELOCITY,0),i=this.direction==p.Z.Left?new o.Z(this.position.x+g.WIDTH,this.position.y):new o.Z(this.position.x-g.WIDTH,this.position.y);t.objects.push(new g(new o.Z(g.WIDTH,g.SPRITE_HEIGHT),i,e,this))}}class Z{static createInstance(t,e,i){switch(t){case a:return new R(e,i);case h:return new u(e,i);case l:return new r.Z(e,i)}}}var D=i(112),x=i(347),A=i(858),f=i(10);class H extends f.Z{static DOOR_HEIGHT=64;static DOOR_WIDTH=32;static LEFT_CLOSED_SPRITES=[99,116];static RIGHT_CLOSED_SPRITES=[100,117];static SHIFT_LEFT=new Event(A.Z.ShiftLeft);static SHIFT_RIGHT=new Event(A.Z.ShiftRight);constructor(t,e,i){super(t,e,new I.Z(e.x,e.y,t.x,t.y,"pink")),this.direction=i,this.isClosed=!0,this.isCollidable=!0,this.isSolid=!0,this.isLocked=!1,this.allSprites=n.Z.generateSpritesFromSpriteSheet(T.Wc.get(y.Z.CityEnlarged),x.Z.SIZE,x.Z.SIZE),this.sprites=this.initializeSprites(),this.spriteLocations=this.initializeSpriteLocations()}render(t={x:0,y:0}){this.sprites.forEach(((e,i)=>{e.render(this.spriteLocations[i].x+t.x,this.spriteLocations[i].y+t.y)})),T.eM&&this.hitbox.render(T.Do)}initializeSpriteLocations(){const t=[];return t.push(new o.Z(this.position.x,this.position.y)),t.push(new o.Z(this.position.x,this.position.y+x.Z.SIZE)),t}initializeSprites(){const t=[];return this.direction==p.Z.Left?H.LEFT_CLOSED_SPRITES.forEach((e=>{t.push(this.allSprites[e])})):this.direction==p.Z.Right&&H.RIGHT_CLOSED_SPRITES.forEach((e=>{t.push(this.allSprites[e])})),t}onCollision(t){super.onCollision(t),t instanceof c.Z&&(this.open(),this.isClosed=!1)}didPlayerCollide(){return this.isClosed&&!this.isLocked}open(){if(this.isClosed&&this.direction==p.Z.Left){const t=this.spriteLocations[0],e=this.spriteLocations[1];T.jX.play(E.Z.DoorOpening),T.HT.tween(t,["y"],[t.y-x.Z.SIZE],1),T.HT.tween(e,["y"],[e.y+x.Z.SIZE],1,(()=>{this.direction==p.Z.Left?T.JQ.dispatchEvent(H.SHIFT_LEFT):T.JQ.dispatchEvent(H.SHIFT_RIGHT)}))}}close(){if(!this.isClosed){const t=this.spriteLocations[0],e=this.spriteLocations[1];T.jX.play(E.Z.DoorOpening),T.HT.tween(t,["y"],[t.y+x.Z.SIZE],1),T.HT.tween(e,["y"],[e.y-x.Z.SIZE],1)}}}i(680);class L{constructor(t,e,i,s,r=!1){this.player=t,this.width=e.layers[0].width,this.height=e.layers[0].height,this.dimensions=new o.Z(this.width,this.height),this.sprites=n.Z.generateSpritesFromSpriteSheet(T.Wc.get(y.Z.CityEnlarged),x.Z.SIZE,x.Z.SIZE),this.tiles=this.generateTiles(e.layers[0].data,this.sprites),this.enemies=this.generateEnemies(i),this.objects=this.generateObjects(s),this.adjacentOffset=new o.Z}update(t){this.cleanUpObjects(),this.cleanUpEntities(),this.updatePlayer(t),this.updateEnemies(t),this.updateObjects(t)}render(){this.renderTiles(),this.player.render(),this.renderEnemies(),this.objects.forEach((t=>t.render()))}cleanUpEntities(){this.enemies=this.enemies.filter((t=>!t.cleanUp))}cleanUpObjects(){this.objects=this.objects.filter((t=>!t.cleanUp))}updatePlayer(t){this.isShifting||(this.objects.forEach((t=>{t.didCollideWithEntity(this.player.hitbox)&&(t instanceof S.Z&&t.shooter!=this.player?(t.cleanUp=!0,this.player.isInvulnerable||this.player.changeState(D.Z.Hurt,{damage:t.power})):t instanceof H&&t.onCollision(this.player))})),this.player.update(t))}updateEnemies(t){this.enemies.forEach((e=>{this.objects.forEach((t=>{t.didCollideWithEntity(e.hitbox)&&(t instanceof S.Z&&t.shooter==this.player?(t.cleanUp=!0,e.changeState(m.Z.Hurt,{power:t.power})):t.onCollision(e))})),!e.didCollideWithEntity(this.player.hitbox)||this.player.isInvulnerable||e.isDead||this.player.changeState(D.Z.Hurt,{damage:e.collisionDamage}),!this.player.didCollideWithEntity(e.meleeHitbox)||this.player.isInvulnerable||e.isDead||this.player.changeState(D.Z.Hurt,{damage:e.meleeDamage}),e.update(t)}))}updateObjects(t){this.objects.forEach((e=>e.update(t)))}generateEnemies(t){const e=new Array;return t.forEach(((t,i)=>{const s=new o.Z(t.position.x*x.Z.SIZE,t.position.y*x.Z.SIZE);e.push(Z.createInstance(t.type,this.player,s))})),e}renderEnemies(){this.enemies.forEach((t=>t.render()))}generateTiles(t,e){const i=[];return t.forEach((t=>{const s=-1==--t?null:new x.Z(t,e);i.push(s)})),i}renderTiles(){for(let t=0;t<this.height;t++)for(let e=0;e<this.width;e++)this.getTile(e,t)?.render(e+Math.floor(this.adjacentOffset.x/x.Z.SIZE),t+Math.floor(this.adjacentOffset.y)),T.eM&&(0,s.b)(T.Do,e*x.Z.SIZE,t*x.Z.SIZE,x.Z.SIZE,x.Z.SIZE,0,!1,!0)}getTile(t,e){return this.tiles[t+e*this.width]}generateObjects(t){const e=[];return t.forEach((t=>{e.push(new H(new o.Z(H.DOOR_WIDTH,H.DOOR_HEIGHT),new o.Z(t.position.x*x.Z.SIZE,t.position.y*x.Z.SIZE),t.direction))})),e}}},347:(t,e,i)=>{i.d(e,{Z:()=>s});class s{static SIZE=32;constructor(t,e){this.sprites=e,this.id=t}render(t,e){this.sprites[this.id].render(t*s.SIZE,e*s.SIZE)}}},164:(t,e,i)=>{i.d(e,{Z:()=>d});var s=i(767),n=i(378),o=i(38),r=(i(228),i(465)),a=i(642),h=i(504),l=(i(159),i(347));class c{static OUTER_BAR_X_OFFSET=5;static OUTER_BAR_Y_OFFSET=5;static OUTER_BAR_WIDTH=l.Z.SIZE;static OUTER_BAR_HEIGHT=4*l.Z.SIZE;static INNER_BAR_X_OFFSET=11;static INNER_BAR_Y=4*l.Z.SIZE+5;static INNER_BAR_WIDTH=l.Z.SIZE-12;static OUTER_BAR_COLOUR="gray";static HEALTH_BAR_COLOUR="green";static BACKING_BAR_COLOUR="black";static DEBUG_COLOUR="yellow";constructor(t,e){this.entity=t,this.position=e}render(){h.Do.save(),this.renderOuterBar(),this.renderBackingBar(),this.renderInnerBar(),h.Do.restore()}renderOuterBar(){h.Do.fillStyle=c.OUTER_BAR_COLOUR,(0,s.b)(h.Do,this.position.x+c.OUTER_BAR_X_OFFSET,this.position.y+c.OUTER_BAR_Y_OFFSET,c.OUTER_BAR_WIDTH,c.OUTER_BAR_HEIGHT,5,!0,!0)}renderInnerBar(){h.Do.fillStyle=c.HEALTH_BAR_COLOUR,(0,s.b)(h.Do,this.position.x+c.INNER_BAR_X_OFFSET,c.INNER_BAR_Y,c.INNER_BAR_WIDTH,-this.entity.health/this.entity.totalHealth*c.OUTER_BAR_HEIGHT,0,!0)}renderBackingBar(){h.Do.fillStyle=c.BACKING_BAR_COLOUR,(0,s.b)(h.Do,this.position.x+c.INNER_BAR_X_OFFSET,this.position.y+c.OUTER_BAR_Y_OFFSET,c.INNER_BAR_WIDTH,c.OUTER_BAR_HEIGHT,0,!0,!0)}}class d{static DEBUG_COLOUR="yellow";static BOSS_HEALTHBAR_X_OFFSET=10;static LIVES_ICON_X=0;static LIVES_ICON_Y=h.lf-l.Z.SIZE;static LIVES_COUNT_X=1.5*l.Z.SIZE;static LIVES_COUNT_Y=h.lf-.25*l.Z.SIZE;static LIVE_COUNT_COLOUR="white";constructor(t,e=null){this.player=t,this.boss=e,this.sprites=n.Z.generateSpritesFromSpriteSheet(h.Wc.get(a.Z.Player),r.Z.PLAYER_SPRITE_WIDTH,r.Z.PLAYER_SPRITE_HEIGHT),this.playerHealthBar=new c(this.player,new o.Z(0,0)),this.bossHealthBar=null!=this.boss?new c(this.boss,new o.Z(h.vj-l.Z.SIZE-d.BOSS_HEALTHBAR_X_OFFSET,0)):null}render(){this.playerHealthBar.render(),this.bossHealthBar?.render(),this.renderLives(),h.eM&&this.renderDebugInfo()}renderLives(){this.renderLivesIcon(),this.renderLivesCount()}renderLivesIcon(){h.Do.save(),h.Do.translate(d.LIVES_ICON_X,d.LIVES_ICON_Y),h.Do.scale(.5,.5),this.sprites[r.Z.IDLE_ROW_START].render(0,0),h.Do.restore()}renderLivesCount(){h.Do.save(),h.Do.font="bold 10px mega-man-zx",h.Do.fillStyle=d.LIVE_COUNT_COLOUR,h.Do.fillText(this.player.lives,d.LIVES_COUNT_X,d.LIVES_COUNT_Y),h.Do.restore()}renderDebugInfo(){this.renderDebugPanel(),this.renderPlayerState(),this.renderPlayerCoordinates(),this.renderMapCoordinates(),this.renderAdjacentTileCoordinates()}renderDebugPanel(){h.Do.save(),h.Do.fillStyle="blue",(0,s.b)(h.Do,.6*h.vj,0,.4*h.vj,.25*h.lf,0,!0),h.Do.restore()}renderPlayerState(){h.Do.save(),h.Do.font="5px mega-man-zx",h.Do.fillStyle=d.DEBUG_COLOUR,h.Do.textBaseline="middle",h.Do.textAlign="right",h.Do.fillText(`Current State: ${this.player.stateMachine.currentState.constructor.name}`,h.vj,10),h.Do.restore()}renderPlayerCoordinates(){h.Do.save(),h.Do.translate(h.vj,20),h.Do.font="5px mega-man-zx",h.Do.fillStyle=d.DEBUG_COLOUR,h.Do.textBaseline="middle",h.Do.textAlign="right",h.Do.fillText(`Coordinates: (${this.player.hitbox.position.x}, ${this.player.hitbox.position.y})`,0,0),h.Do.restore()}renderMapCoordinates(){h.Do.save(),h.Do.translate(h.vj,30),h.Do.font="5px mega-man-zx",h.Do.fillStyle=d.DEBUG_COLOUR,h.Do.textBaseline="middle",h.Do.textAlign="right",h.Do.fillText(`Tile coordinates: (${Math.floor(this.player.hitbox.position.x/l.Z.SIZE)},${Math.floor(this.player.hitbox.position.y/l.Z.SIZE)})`,0,0),h.Do.restore()}renderAdjacentTileCoordinates(){this.renderTopTileCoordinates(),this.renderRightTileCoordinates(),this.renderBottomTileCoordinates()}renderTopTileCoordinates(){h.Do.save(),h.Do.translate(h.vj,40),h.Do.font="5px mega-man-zx",h.Do.fillStyle=d.DEBUG_COLOUR,h.Do.textBaseline="middle",h.Do.textAlign="right",h.Do.fillText(`Top (${Math.floor((this.player.hitbox.position.x+this.player.hitbox.dimensions.x/2)/l.Z.SIZE)},${Math.floor((this.player.hitbox.position.y-2)/l.Z.SIZE)})\tTop Right (${Math.floor((this.player.hitbox.position.x+this.player.hitbox.dimensions.x)/l.Z.SIZE)},${Math.floor((this.player.hitbox.position.y-2)/l.Z.SIZE)})`,0,0),h.Do.restore()}renderRightTileCoordinates(){h.Do.save(),h.Do.translate(h.vj,50),h.Do.font="5px mega-man-zx",h.Do.fillStyle=d.DEBUG_COLOUR,h.Do.textBaseline="middle",h.Do.textAlign="right",h.Do.fillText(`Right Top (,) Right (${Math.floor((this.player.hitbox.position.x+this.player.hitbox.dimensions.x+2)/l.Z.SIZE)},${Math.floor((this.player.hitbox.position.y+this.player.hitbox.dimensions.y/2)/l.Z.SIZE)}) Right Bottom(${Math.floor((this.player.hitbox.position.x+this.player.hitbox.dimensions.x+2)/l.Z.SIZE)},${Math.floor((this.player.hitbox.position.y+this.player.hitbox.dimensions.y+2)/l.Z.SIZE)})`,0,0),h.Do.restore()}renderBottomTileCoordinates(){h.Do.save(),h.Do.translate(h.vj,60),h.Do.font="5px mega-man-zx",h.Do.fillStyle=d.DEBUG_COLOUR,h.Do.textBaseline="middle",h.Do.textAlign="right",h.Do.fillText(`Bottom Left (,) Bottom (${Math.floor((this.player.hitbox.position.x+this.player.hitbox.dimensions.x/2)/l.Z.SIZE)},${Math.floor((this.player.hitbox.position.y+this.player.hitbox.dimensions.y+2)/l.Z.SIZE)}) Bottom Right (${Math.floor((this.player.hitbox.position.x+this.player.hitbox.dimensions.x)/l.Z.SIZE)},${Math.floor((this.player.hitbox.position.y+this.player.hitbox.dimensions.y+2)/l.Z.SIZE)})`,0,0),h.Do.restore()}}},621:(t,e,i)=>{i.d(e,{Z:()=>a});var s=i(313),n=i(408),o=i(112),r=i(504);class a extends s.Z{constructor(){super()}enter(t){this.player=t.player,this.level=t.level,this.levelIndex=t.levelIndex,this.boss=t.boss,this.player.stateMachine.change(o.Z.Idle)}update(t){r.HT.update(t),this.player.currentAnimation.update(t),this.boss.update(t),this.boss.currentAnimation.isDone()&&r.XE.change(n.Z.LevelVictory,{player:this.player,level:this.level,levelIndex:this.levelIndex})}render(){this.level.render()}}},978:(t,e,i)=>{i.d(e,{Z:()=>h});var s=i(313),n=(i(858),i(408)),o=i(127),r=i(504),a=i(164);class h extends s.Z{constructor(){super()}enter(t){this.player=t.player,this.level=t.level,this.levelIndex=t.levelIndex,this.boss=this.level.currentRoom.enemies[0],this.userInterface=new a.Z(this.player,this.boss),r.jX.play(o.Z.BossFight)}exit(){r.jX.stop(o.Z.BossFight)}update(t){if(this.paused){if(!r.XP.Escape)return;r.XP.Escape=!1,this.paused=!1,r.jX.play(o.Z.BossFight)}else if(r.XP.Escape)return r.XP.Escape=!1,this.paused=!0,void r.jX.pause(o.Z.BossFight);this.level.update(t),r.HT.update(t),this.boss.isDead&&r.XE.change(n.Z.BossDeath,{player:this.player,level:this.level,boss:this.boss,levelIndex:this.levelIndex})}render(){this.level.render(),this.userInterface.render(),this.paused&&this.renderPausedMessage()}renderPausedMessage(){r.Do.font="40px mega-man-zx",r.Do.fillStyle="white",r.Do.textBaseline="middle",r.Do.textAlign="center",r.Do.fillText("PAUSED",r.vj/2,r.lf/2)}}},751:(t,e,i)=>{i.d(e,{Z:()=>l});var s=i(313),n=i(918),o=(i(858),i(408)),r=i(112),a=i(127),h=i(504);class l extends s.Z{static WARNING_LABEL_Y=0;static WARNING_LABEL_X=h.vj/2;static WARNING_LABEL_ALPHA=1;constructor(){super()}async enter(t){this.bossName=t.bossDefinition.name,this.bossTitle=t.bossDefinition.title,this.player=t.player,this.level=t.level,this.levelIndex=t.levelIndex,this.boss=this.level.currentRoom.enemies[0],this.player.stateMachine.change(r.Z.Idle),this.boss.stateMachine.change(n.Z.Idle),h.jX.play(a.Z.BossIntro),this.labelAlpha=l.WARNING_LABEL_ALPHA,this.bossNameAlpha=0,h.HT.tween(this,["labelAlpha"],[0],1),h.HT.tween(this,["bossNameAlpha"],[l.WARNING_LABEL_ALPHA],2)}exit(){h.jX.stop(a.Z.BossIntro)}update(t){h.HT.update(t),this.player.currentAnimation.update(t),this.boss.currentAnimation.update(t),h.XP.Enter&&(h.XP.Enter=!1,h.XE.change(o.Z.BossFight,{player:this.player,level:this.level,levelIndex:this.levelIndex})),0===this.labelAlpha?h.HT.tween(this,["labelAlpha"],[l.WARNING_LABEL_ALPHA],1):this.labelAlpha===l.WARNING_LABEL_ALPHA&&h.HT.tween(this,["labelAlpha"],[0],1)}render(){this.level.background.render(),this.level.currentRoom.render(),this.renderWarningLabel(),this.renderBossNameAndTitle()}renderWarningLabel(){h.Do.save(),h.Do.font="40px mega-man-zx",h.Do.fillStyle=`rgba(255,0,0, ${this.labelAlpha})`,h.Do.textBaseline="middle",h.Do.textAlign="center",h.Do.fillText("WARNING",l.WARNING_LABEL_X,h.lf/2),h.Do.restore()}renderBossNameAndTitle(){h.Do.save(),h.Do.font="20px mega-man-zx",h.Do.fillStyle=`rgba(255,0,0, ${this.bossNameAlpha})`,h.Do.textBaseline="middle",h.Do.textAlign="center",h.Do.fillText(`${this.bossName}`,l.WARNING_LABEL_X,.7*h.lf),h.Do.fillText(`${this.bossTitle}`,l.WARNING_LABEL_X,.8*h.lf),h.Do.restore()}}},626:(t,e,i)=>{i.d(e,{Z:()=>c});var s=i(8),n=i(378),o=i(313),r=i(465),a=i(408),h=i(642),l=i(504);class c extends o.Z{constructor(){super(),this.sprites=n.Z.generateSpritesFromSpriteSheet(l.Wc.get(h.Z.Player),r.Z.PLAYER_SPRITE_WIDTH,r.Z.PLAYER_SPRITE_HEIGHT),this.runningSprites=this.sprites.slice(r.Z.WALKING_ROW_START,r.Z.WALKING_ROW_END),this.shootingSprites=this.sprites.slice(r.Z.SHOOTING_ROW_START,r.Z.SHOOTING_ROW_END),this.jumpingSprites=this.sprites.slice(r.Z.JUMPING_ROW_START,r.Z.JUMPING_ROW_END),this.dodgingSprites=this.sprites.slice(r.Z.ROLLING_ROW_START,r.Z.ROLLING_ROW_END),this.pausedSprite=this.sprites[r.Z.IDLE_ROW_START],this.runningAnimation=new s.Z([0,1,2,3,4,5,6,7],.12),this.shootingAnimation=new s.Z([0,1,2,3,4,5,6],.05),this.jumpingAnimation=new s.Z([0,1,2,3],.15),this.rollingAnimation=new s.Z([0,1,2,3,4,5,6],.1),this.background=l.Wc.get(h.Z.IndustrialBg)}enter(){this.dummyRunningPlayer={sprites:this.runningSprites,animation:this.runningAnimation},this.dummyShootingPlayer={sprites:this.shootingSprites,animation:this.shootingAnimation},this.dummyJumpingPlayer={sprites:this.jumpingSprites,animation:this.jumpingAnimation},this.dummyDodgingPlayer={sprites:this.dodgingSprites,animation:this.rollingAnimation},this.dummyPausedPlayer={sprite:this.pausedSprite}}exit(){}update(t){this.runningAnimation.update(t),this.dummyRunningPlayer.animation.update(t),this.dummyShootingPlayer.animation.update(t),this.dummyJumpingPlayer.animation.update(t),this.dummyDodgingPlayer.animation.update(t),l.XP.Escape&&l.XE.change(a.Z.TitleScreen),this.runningAnimation.isDone()&&l.HT.wait(1,(()=>this.runningAnimation.refresh())),this.dummyRunningPlayer.animation.isDone()&&l.HT.wait(1,(()=>this.dummyRunningPlayer.animation.refresh())),this.shootingAnimation.isDone()&&l.HT.wait(1,(()=>this.shootingAnimation.refresh()))}render(){this.background.render(0,0,l.vj,l.lf),this.renderText(),this.renderRunningSprites(),this.renderShootingSprites(),this.renderJumpingSprites(),this.renderDodgingSprites(),this.renderStopwatchIcon(),this.renderPausedSprite()}renderText(){l.Do.save(),l.Do.font="40px mega-man-zx",l.Do.fillStyle="white",l.Do.textBaseline="middle",l.Do.textAlign="center",l.Do.fillText("CONTROLS",l.vj/2,l.lf/4),l.Do.font="20px mega-man-zx",l.Do.textAlign="right",l.Do.fillText("A / D",l.vj/3,.5*l.lf),l.Do.fillText("Z",l.vj/3,.6*l.lf),l.Do.fillText("SPACE",l.vj/3,.7*l.lf),l.Do.fillText("SHIFT",l.vj/3,.8*l.lf),l.Do.fillText("ESC",l.vj/3,.9*l.lf),l.Do.restore()}renderRunningSprites(){l.Do.save(),l.Do.translate(l.vj*(2/3)-r.Z.PLAYER_SPRITE_WIDTH/2,.5*l.lf-r.Z.PLAYER_SPRITE_HEIGHT/2),this.dummyRunningPlayer.sprites[this.dummyRunningPlayer.animation.getCurrentFrame()].render(0,0),l.Do.restore()}renderShootingSprites(){l.Do.save(),l.Do.translate(l.vj*(2/3)-r.Z.PLAYER_SPRITE_WIDTH/2,.6*l.lf-r.Z.PLAYER_SPRITE_HEIGHT/2),this.dummyShootingPlayer.sprites[this.dummyShootingPlayer.animation.getCurrentFrame()].render(0,0),l.Do.restore()}renderJumpingSprites(){l.Do.save(),l.Do.translate(l.vj*(2/3)-r.Z.PLAYER_SPRITE_WIDTH/2,.7*l.lf-r.Z.PLAYER_SPRITE_HEIGHT/2),this.dummyJumpingPlayer.sprites[this.dummyJumpingPlayer.animation.getCurrentFrame()].render(0,0),l.Do.restore()}renderDodgingSprites(){l.Do.save(),l.Do.translate(l.vj*(2/3)-r.Z.PLAYER_SPRITE_WIDTH/2,.8*l.lf-r.Z.PLAYER_SPRITE_HEIGHT/2),this.dummyDodgingPlayer.sprites[this.dummyDodgingPlayer.animation.getCurrentFrame()].render(0,0),l.Do.restore()}renderStopwatchIcon(){l.Do.save(),l.Do.translate(l.vj*(2/3)-r.Z.PLAYER_SPRITE_WIDTH/2,.9*l.lf),l.Do.font="20px",l.Do.fillText("⏱️",0,0),l.Do.restore()}renderPausedSprite(){l.Do.save(),l.Do.translate(l.vj*(2/3)-r.Z.PLAYER_SPRITE_WIDTH/2,.9*l.lf-r.Z.PLAYER_SPRITE_HEIGHT/2),this.pausedSprite.render(0,0),l.Do.restore()}}},729:(t,e,i)=>{i.d(e,{Z:()=>l});var s=i(378),n=i(313),o=i(465),r=i(408),a=i(642),h=i(504);class l extends n.Z{constructor(){super(),this.dummySprites=s.Z.generateSpritesFromSpriteSheet(h.Wc.get(a.Z.Player),o.Z.PLAYER_SPRITE_WIDTH,o.Z.PLAYER_SPRITE_HEIGHT),this.deadSprite=this.dummySprites[o.Z.DYING_ROW_END-1]}enter(){}exit(){}update(){h.XP.Enter&&(h.XP.Enter=!1,h.XE.change(r.Z.TitleScreen))}render(){this.renderTitle(),this.renderCorpse()}renderTitle(){h.Do.save(),h.Do.fillStyle="black",h.Do.fillRect(0,0,h.vj,h.lf),h.Do.font="60px mega-man-zx",h.Do.fillStyle="darkblue",h.Do.textBaseline="middle",h.Do.textAlign="center",h.Do.fillText("Game Over",h.vj/2,h.lf/2),h.Do.restore()}renderCorpse(){h.Do.save(),this.deadSprite.render(h.vj/2-o.Z.PLAYER_SPRITE_WIDTH/2,.8*h.lf-o.Z.PLAYER_SPRITE_HEIGHT/2)}}},258:(t,e,i)=>{i.d(e,{Z:()=>c});var s=i(378),n=i(313),o=i(408),r=i(642),a=i(504),h=i(881),l=i(767);class c extends n.Z{static BOSS_RECTANGLE_OUTER_SIZE=129;static BOSS_RECTANGLE_INNER_SIZE=125;static RECTANGLES_STARTING_X=100;static MAX_RECTANGLES=3;static EVIL_WIZARD_X=37;constructor(t){super(),this.levelDefinitions=t,this.wizardSprites=s.Z.generateSpritesFromSpriteSheet(a.Wc.get(r.Z.EvilWizardIdle),h.Z.SPRITE_WIDTH,h.Z.SPRITE_HEIGHT),this.wizardSelector=this.wizardSprites[0],this.cursor={x:0,y:0,index:0,alpha:1},this.background=a.Wc.get(r.Z.IndustrialBg)}enter(t){null!=t?.levelIndex&&(this.levelDefinitions.bossNameDefinitions.bosses[t.levelIndex].isBeaten=!0,this.levelDefinitions.bossNameDefinitions.bosses.every((t=>t.isBeaten))&&(console.log("CONGRATULATIONS! YOU WIN!"),a.XE.change(o.Z.Victory)))}update(t){a.XP.Escape&&a.XE.change(o.Z.TitleScreen),a.XP.Enter&&this.cursor.index<this.levelDefinitions.mapDefinitions.length&&a.XE.change(o.Z.Play,{mapDefinitions:this.levelDefinitions.mapDefinitions[this.cursor.index],enemyDefinitions:this.levelDefinitions.enemyDefinitions[this.cursor.index],doorDefinitions:this.levelDefinitions.doorDefinitions[this.cursor.index],bossDefinition:this.levelDefinitions.bossNameDefinitions.bosses[this.cursor.index],levelIndex:this.cursor.index}),this.updateCursor(t)}updateCursor(t){this.cursor.alpha=1==this.cursor.alpha?0:1,this.cursor.index;const e=.6*a.lf-c.BOSS_RECTANGLE_OUTER_SIZE/2-2;a.XP.a&&(a.XP.a=!1,this.cursor.index=Math.max(0,this.cursor.index-1)),a.XP.d&&(a.XP.d=!1,this.cursor.index=Math.min(this.cursor.index+1,c.MAX_RECTANGLES-1)),this.cursor.x=c.RECTANGLES_STARTING_X+this.cursor.index*c.BOSS_RECTANGLE_OUTER_SIZE-2,this.cursor.y=e}render(){this.background.render(0,0,a.vj,a.lf),this.renderTitle(),this.renderLevels(),this.renderCursor()}renderTitle(){a.Do.save(),a.Do.font="40px mega-man-zx",a.Do.fillStyle="white",a.Do.textBaseline="middle",a.Do.textAlign="center",a.Do.fillText("Level Select",a.vj/2,a.lf/4),a.Do.restore()}renderLevels(){this.renderLevelRectangles(),this.renderBossIcons()}renderLevelRectangles(){for(let t=0;t<this.levelDefinitions.mapDefinitions.length;t++)this.renderRectangle(t)}renderRectangle(t){a.Do.save(),a.Do.translate(c.RECTANGLES_STARTING_X+t*c.BOSS_RECTANGLE_OUTER_SIZE,.6*a.lf-c.BOSS_RECTANGLE_OUTER_SIZE/2),a.Do.fillStyle="grey",a.Do.fillRect(-2,-2,c.BOSS_RECTANGLE_OUTER_SIZE,c.BOSS_RECTANGLE_OUTER_SIZE),a.Do.fillStyle="black",a.Do.fillRect(0,0,c.BOSS_RECTANGLE_INNER_SIZE,c.BOSS_RECTANGLE_INNER_SIZE),a.Do.restore()}renderBossIcons(){this.renderEvilWizardIcon()}renderEvilWizardIcon(){a.Do.save(),a.Do.translate(c.EVIL_WIZARD_X,.6*a.lf-h.Z.SPRITE_HEIGHT/2),this.wizardSelector.render(0,0),a.Do.restore()}renderCursor(){a.Do.save(),a.Do.translate(this.cursor.x,this.cursor.y),a.Do.strokeStyle="white",a.Do.lineWidth=5,a.Do.globalAlpha=this.cursor.alpha,(0,l.b)(a.Do,0,0,c.BOSS_RECTANGLE_OUTER_SIZE,c.BOSS_RECTANGLE_OUTER_SIZE),a.Do.restore()}}},993:(t,e,i)=>{i.d(e,{Z:()=>a});var s=i(313),n=i(408),o=i(127),r=i(504);class a extends s.Z{constructor(){super()}enter(t){this.level=t.level,this.player=t.player,this.levelIndex=t.levelIndex,r.jX.play(o.Z.LevelVictory),r.HT.wait(4,(()=>{r.XE.change(n.Z.LevelSelect,{levelIndex:this.levelIndex})}))}update(t){r.HT.update(t),this.player.currentAnimation.update(t)}render(){this.level.render()}}},204:(t,e,i)=>{i.d(e,{Z:()=>d});var s=i(313),n=i(465),o=i(858),r=i(408),a=i(127),h=i(504),l=i(680),c=i(164);class d extends s.Z{constructor(t){super()}enter(t){this.player=null!=t.player?t.player:new n.Z,this.level=new l.Z(this.player,t.mapDefinitions,t.enemyDefinitions,t.doorDefinitions,t.bossDefinition,t.levelIndex),this.userInterface=new c.Z(this.player),this.levelIndex=t.levelIndex,this.bossIntroHandler=this.enterBossIntro.bind(this),h.JQ.addEventListener(o.Z.StartBossIntro,this.bossIntroHandler),h.jX.play(a.Z.Industrial)}exit(){h.jX.stop(a.Z.Industrial),this.removeBossIntroListener()}update(t){if(this.paused){if(!h.XP.Escape)return;h.XP.Escape=!1,this.paused=!1,h.jX.play(a.Z.Industrial)}else if(h.XP.Escape)return h.XP.Escape=!1,this.paused=!0,void h.jX.pause(a.Z.Industrial);this.level.update(t),h.HT.update(t)}render(){this.level.render(),this.userInterface.render(),this.paused&&this.renderPausedMessage()}enterBossIntro(){this.removeBossIntroListener(),h.XE.change(r.Z.BossIntro,{player:this.player,level:this.level,bossDefinition:this.level.bossDefinition,levelIndex:this.levelIndex})}removeBossIntroListener(){h.JQ.removeEventListener(o.Z.StartBossIntro,this.bossIntroHandler)}renderPausedMessage(){h.Do.font="40px mega-man-zx",h.Do.fillStyle="white",h.Do.textBaseline="middle",h.Do.textAlign="center",h.Do.fillText("PAUSED",h.vj/2,h.lf/2)}}},854:(t,e,i)=>{i.d(e,{Z:()=>h});var s=i(313),n=i(504),o=i(127),r=i(408),a=i(642);class h extends s.Z{constructor(){super(),this.menuOptions={start:"Start",controls:"Controls"},this.highlighted=this.menuOptions.start,this.background=n.Wc.get(a.Z.IndustrialBg)}enter(){n.jX.play(o.Z.Industrial)}exit(){}update(t){(n.XP.w||n.XP.s)&&(n.XP.w=!1,n.XP.s=!1,this.highlighted=this.highlighted===this.menuOptions.start?this.menuOptions.controls:this.menuOptions.start),n.XP.Enter&&(n.XP.Enter=!1,n.jX.play(o.Z.Laser),this.highlighted===this.menuOptions.start?n.XE.change(r.Z.LevelSelect):n.XE.change(r.Z.Controls))}render(){this.background.render(0,0,n.vj,n.lf),n.Do.save(),n.Do.font="40px mega-man-zx",n.Do.fillStyle="white",n.Do.textBaseline="middle",n.Do.textAlign="center",n.Do.fillText("MEGA MAN PSEUDO",n.vj/2,n.lf/4),n.Do.font="20px mega-man-zx",n.Do.fillStyle=this.highlighted===this.menuOptions.start?"blue":"white",n.Do.fillText(`${this.menuOptions.start}`,n.vj/2,.8*n.lf),n.Do.fillStyle=this.highlighted===this.menuOptions.controls?"blue":"white",n.Do.fillText(`${this.menuOptions.controls}`,n.vj/2,.9*n.lf),n.Do.restore()}}},976:(t,e,i)=>{i.d(e,{Z:()=>r});var s=i(313),n=i(504),o=i(642);class r extends s.Z{constructor(){super(),this.background=n.Wc.get(o.Z.IndustrialBg)}update(t){}render(){this.background.render(0,0,n.vj,n.lf),this.renderTitle()}renderTitle(){n.Do.save(),n.Do.font="35px mega-man-zx",n.Do.fillStyle="yellow",n.Do.textBaseline="middle",n.Do.textAlign="center",n.Do.fillText("CONGRATULATIONS!",n.vj/2,n.lf/2),n.Do.fillText("You Win!",n.vj/2,.75*n.lf),n.Do.restore()}}}},o={};function r(t){var e=o[t];if(void 0!==e)return e.exports;var i=o[t]={exports:{}};return n[t](i,i.exports,r),i.exports}t="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",i="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",s=t=>{t&&!t.d&&(t.d=1,t.forEach((t=>t.r--)),t.forEach((t=>t.r--?t.r++:t())))},r.a=(n,o,r)=>{var a;r&&((a=[]).d=1);var h,l,c,d=new Set,p=n.exports,m=new Promise(((t,e)=>{c=e,l=t}));m[e]=p,m[t]=t=>(a&&t(a),d.forEach(t),m.catch((t=>{}))),n.exports=m,o((n=>{var o;h=(n=>n.map((n=>{if(null!==n&&"object"==typeof n){if(n[t])return n;if(n.then){var o=[];o.d=0,n.then((t=>{r[e]=t,s(o)}),(t=>{r[i]=t,s(o)}));var r={};return r[t]=t=>t(o),r}}var a={};return a[t]=t=>{},a[e]=n,a})))(n);var r=()=>h.map((t=>{if(t[i])throw t[i];return t[e]})),l=new Promise((e=>{(o=()=>e(r)).r=0;var i=t=>t!==a&&!d.has(t)&&(d.add(t),t&&!t.d&&(o.r++,t.push(o)));h.map((e=>e[t](i)))}));return o.r?l:r()}),(t=>(t?c(m[i]=t):l(p),s(a)))),a&&(a.d=0)},r.d=(t,e)=>{for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r(225)})();